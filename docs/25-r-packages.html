<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.548">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Applied Data Analysis - 25&nbsp; Building Custom R Packages</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./27-python-from-R.html" rel="next">
<link href="./24-module.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<link rel="stylesheet" href="css/style.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./25-r-packages.html">Part III - Miscellany</a></li><li class="breadcrumb-item"><a href="./25-r-packages.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Building Custom <strong><em>R</em></strong> Packages</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./img/statistics-hand.svg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applied Data Analysis</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Preliminaries</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-logistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Logistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-course-schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-typography-and-formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Typography and Formatting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-programming-style-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming Style Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Part I - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Getting Started with <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting Started with <strong><em>RStudio</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Extending the Functionality of <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Fundamentals of the <strong><em>R</em></strong> Language</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Basics of Version Control</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reproducible Research</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Additional Data Structures in <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting Data into <strong><em>R</em></strong></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Functions and Flow Control</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Part II - Statistics and Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Central Tendency and Spread</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Probability and Distributions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Confidence Intervals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Classical Hypothesis Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Using Permutation Tests</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Error, Power, and Effect Size</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Introduction to Linear Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Elements of Regression Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Categorical Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Multiple Regression and ANCOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Model Selection in Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Generalized Linear Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Mixed Effects or Multilevel Modeling</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Part III - Miscellany</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-r-packages.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Building Custom <strong><em>R</em></strong> Packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-python-from-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Using <strong><em>Python</em></strong> from <strong><em>R</em></strong></span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Exercises</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 01</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 02</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 03</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 04</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-04-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 04 Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 05</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-05-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 05 Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 07</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-07-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 07 Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 08</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 09</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-09-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 09 Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 10</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-10-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 10 Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 11</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-11-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 11 Solution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 12</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Assignments</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-analysis-replication-assignment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analysis Replication</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./collaborative-data-science-assignment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Collaborative Data Science Project</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">References</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">List of Packages Used</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#preliminaries" id="toc-preliminaries" class="nav-link" data-scroll-target="#preliminaries">Preliminaries</a></li>
  <li><a href="#steps-for-creating-a-package" id="toc-steps-for-creating-a-package" class="nav-link" data-scroll-target="#steps-for-creating-a-package">Steps for Creating a Package</a>
  <ul class="collapse">
  <li><a href="#create-the-package-directory" id="toc-create-the-package-directory" class="nav-link" data-scroll-target="#create-the-package-directory">Create the Package Directory</a></li>
  <li><a href="#edit-the-description-file" id="toc-edit-the-description-file" class="nav-link" data-scroll-target="#edit-the-description-file">Edit the DESCRIPTION File</a></li>
  <li><a href="#add-function-code" id="toc-add-function-code" class="nav-link" data-scroll-target="#add-function-code">Add Function Code</a></li>
  <li><a href="#add-function-documentation" id="toc-add-function-documentation" class="nav-link" data-scroll-target="#add-function-documentation">Add Function Documentation</a></li>
  <li><a href="#add-dependencies" id="toc-add-dependencies" class="nav-link" data-scroll-target="#add-dependencies">Add Dependencies</a></li>
  <li><a href="#create-documentation-files" id="toc-create-documentation-files" class="nav-link" data-scroll-target="#create-documentation-files">Create Documentation Files</a></li>
  <li><a href="#process-documentation-files" id="toc-process-documentation-files" class="nav-link" data-scroll-target="#process-documentation-files">Process Documentation Files</a></li>
  <li><a href="#build-the-package" id="toc-build-the-package" class="nav-link" data-scroll-target="#build-the-package">Build the Package</a></li>
  <li><a href="#install-and-load-the-package" id="toc-install-and-load-the-package" class="nav-link" data-scroll-target="#install-and-load-the-package">Install and Load the Package</a></li>
  <li><a href="#check-the-package-for-errors" id="toc-check-the-package-for-errors" class="nav-link" data-scroll-target="#check-the-package-for-errors">Check the Package for Errors</a></li>
  </ul></li>
  <li><a href="#writing-a-vignette" id="toc-writing-a-vignette" class="nav-link" data-scroll-target="#writing-a-vignette">Writing a Vignette</a></li>
  <li><a href="#including-a-custom-dataset" id="toc-including-a-custom-dataset" class="nav-link" data-scroll-target="#including-a-custom-dataset">Including a Custom Dataset</a></li>
  <li><a href="#sharing-your-package" id="toc-sharing-your-package" class="nav-link" data-scroll-target="#sharing-your-package">Sharing Your Package</a></li>
  <li><a href="#an-example-with-vignette-and-data" id="toc-an-example-with-vignette-and-data" class="nav-link" data-scroll-target="#an-example-with-vignette-and-data">An Example with Vignette and Data</a>
  <ul class="collapse">
  <li><a href="#create-the-package-directory-1" id="toc-create-the-package-directory-1" class="nav-link" data-scroll-target="#create-the-package-directory-1">Create the Package Directory</a></li>
  <li><a href="#edit-the-description-file-1" id="toc-edit-the-description-file-1" class="nav-link" data-scroll-target="#edit-the-description-file-1">Edit the DESCRIPTION File</a></li>
  <li><a href="#add-dependencies-1" id="toc-add-dependencies-1" class="nav-link" data-scroll-target="#add-dependencies-1">Add Dependencies</a></li>
  <li><a href="#create-documentation-files-1" id="toc-create-documentation-files-1" class="nav-link" data-scroll-target="#create-documentation-files-1">Create Documentation Files</a></li>
  <li><a href="#add-a-vignette-template" id="toc-add-a-vignette-template" class="nav-link" data-scroll-target="#add-a-vignette-template">Add a Vignette Template</a></li>
  <li><a href="#add-a-data-directory-and-data" id="toc-add-a-data-directory-and-data" class="nav-link" data-scroll-target="#add-a-data-directory-and-data">Add a Data Directory and Data</a></li>
  <li><a href="#build-vignettes" id="toc-build-vignettes" class="nav-link" data-scroll-target="#build-vignettes">Build Vignettes</a></li>
  <li><a href="#process-the-documentation-files" id="toc-process-the-documentation-files" class="nav-link" data-scroll-target="#process-the-documentation-files">Process the Documentation Files</a></li>
  <li><a href="#build-the-package-1" id="toc-build-the-package-1" class="nav-link" data-scroll-target="#build-the-package-1">Build the Package</a></li>
  <li><a href="#install-the-package" id="toc-install-the-package" class="nav-link" data-scroll-target="#install-the-package">Install the Package</a></li>
  <li><a href="#check-the-package-for-errors-1" id="toc-check-the-package-for-errors-1" class="nav-link" data-scroll-target="#check-the-package-for-errors-1">Check the Package for Errors</a></li>
  <li><a href="#load-and-use-the-package" id="toc-load-and-use-the-package" class="nav-link" data-scroll-target="#load-and-use-the-package">Load and Use the Package</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./25-r-packages.html">Part III - Miscellany</a></li><li class="breadcrumb-item"><a href="./25-r-packages.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Building Custom <strong><em>R</em></strong> Packages</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="module-25" class="quarto-section-identifier"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Building Custom <strong><em>R</em></strong> Packages</span></span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="objectives" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="objectives">Objectives</h2>
<blockquote class="blockquote">
<p>This module provides an overview of how to build and distribute your own, custom <strong><em>R</em></strong> package. An <strong><em>R</em></strong> package bundles together code, data, and documentation [1] using a set of standard conventions for organizing the components of the bundle and [2] in a way that is easily reusable, shareable, and distributable. Below, we go through some examples of how to create bare-minimum <strong><em>R</em></strong> packages. This module is based heavily and shamelessly on material from the following sources:</p>
</blockquote>
<ul>
<li><a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/">Writing an R Package from Scratch</a>, by Hilary Parker</li>
<li><a href="http://tinyheero.github.io/jekyll/update/2015/07/26/making-your-first-R-package.html">Making your First R Package</a>, by Fong Chun Chan</li>
<li><a href="https://r-mageddon.netlify.com/post/writing-an-r-package-from-scratch/">Writing an R Package from Scratch</a>, by Thomas Westlake</li>
<li><a href="https://kbroman.org/pkg_primer/">R Package Primer</a>, by Karl Broman</li>
</ul>
</section>
<section id="preliminaries" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="preliminaries">Preliminaries</h2>
<ul>
<li>Install and load these packages: <a href="https://cran.r-project.org/web/packages/devtools/devtools.pdf">{devtools}</a> and <a href="https://cran.r-project.org/web/packages/roxygen2/roxygen2.pdf">{roxygen2}</a></li>
<li>Install this package: <a href="https://cran.r-project.org/web/packages/withr/withr.pdf">{withr}</a></li>
<li>Load {tidyverse} and {usethis}</li>
<li>Additionally, make sure you have a <strong><em>C</em></strong> compiler installed on your computer. Many computers do, by default, but to be sure do the following:
<ul>
<li>On Windows, install <a href="https://cran.r-project.org/bin/windows/Rtools/">RTools</a></li>
<li>On MacOS, make sure you have either the Mac software development IDE, <a href="https://developer.apple.com/xcode/">XCode</a>, or the latest “Command-Line Tools for XCode” installed
<ul>
<li>To do the latter, open a Terminal window, run the command <code>xcode-select --install</code>, and accept the license agreement</li>
</ul></li>
</ul></li>
</ul>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> These are not <strong><em>R</em></strong> packages, but rather additional bits of software!</p>
</blockquote>
<p>Once you have done all of this, switch to the <strong><em>R</em></strong> console and run the command <code>has_devel()</code>. If all is well, it should return the message “Your system is ready to build packages!”</p>
</section>
<section id="steps-for-creating-a-package" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="steps-for-creating-a-package">Steps for Creating a Package</h2>
<section id="create-the-package-directory" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="create-the-package-directory">Create the Package Directory</h3>
<p>First, we are going to create a directory with the bare minimum structure needed for an <strong><em>R</em></strong> package. As an illustration, we are going to make a package for a single custom function I created for <a href="17-module.html"><strong>Module 17</strong></a> on statistical power and effect size. We can create a new package one of the following ways:</p>
<section id="method-1" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="method-1"><strong>Method 1:</strong></h4>
<ul>
<li>Choose “File &gt; New Project” and then following the dialog boxes to create a new project…</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/new-project.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Create the project in a new directory…</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/project-type.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>… choose the form of the project to be a “package”…</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/create-package-from-GUI.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>… and name your package (for this example, use the name “powerplot”), choose to create a <strong><em>git</em></strong> repository for the project, and choose to open it in a new session.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/new-package-from-GUI.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<p>Once you create a new package project by this process, a new <strong><em>RStudio</em></strong> session will open, with the working directory set to the newly created directory for the package. you should see the following components:</p>
<ul>
<li>An <code>R/</code> directory, which will hold your code files</li>
<li>A basic <code>DESCRIPTION</code> file, which is a text file that contains metadata about your package</li>
<li>A <code>NAMESPACE</code> file</li>
<li>A <code>man/</code> directory, which will hold the manual pages for your package</li>
<li>An <code>.Rbuildignore file</code>, which like <code>.gitignore</code> is a list of files and directories that you do not want included with your package when you eventually “build” it (i.e., bundle it up into a single archive for distribution)</li>
</ul>
</section>
<section id="method-2" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="method-2"><strong>Method 2:</strong></h4>
<ul>
<li>Alternatively, you can accomplish much of this same setup by running the <code>create_packages()</code> command from the {usethis} package. Specify as an argument to this function a &lt;PATH NAME&gt; to the package directory you want to create.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_package</span>(<span class="st">"~/Development/Repos/powerplot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Running this function will also open a new <strong><em>RStudio</em></strong> session with the working directory set to the newly created directory for the package.</p>
<p>You should find, again, that <strong><em>R</em></strong> has created a new directory with several subdirectories and files, including a DESCRIPTION file, and a NAMESPACE file, and an <code>R</code> directory. Note that <code>man</code> directory created in <strong>Method 1</strong> is not made here, nor is a <strong><em>git</em></strong> repository set up, but a <strong>Build</strong> tab is added to your <strong><em>RStudio</em></strong> IDE workspace.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/new-package-from-usethis.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<p>Whichever method you use to create a new package, make sure you now work in the <strong><em>R</em></strong> session where your new project is active. Confirm that your working directory is set to be the new project directory using <code>getwd()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you need to set the working directory, use <code>setwd()</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Development/Repos/powerplot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="edit-the-description-file" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="edit-the-description-file">Edit the DESCRIPTION File</h3>
<p>Open up the newly created DESCRIPTION file, which was created as a template by either of the methods above. This is basically a structured text file that contains metadata for your package. You can edit this by hand as you see fit and then save it.</p>
<p>The <em>Package</em> line displays the name of the package. The <em>Version</em> line indicates a version number for your package and should be updated as you revise your package. The <em>Title</em> and <em>Description</em> lines give a broad understanding of the purpose of your package. The <em>Author</em> and <em>Maintainer</em> lines (created by Method 1) and the <a href="mailto:Author@R" class="email"><em>Author@R</em></a> line (created by Method 2) include information on who the author (“aut”) and maintainer (“cre”) of the package are and should be replaced with your information. The <em>License</em> line indicates under what conditions your code can be used. For the package we are creating, you can use the following:</p>
<pre><code>Package: powerplot
Title: Power Plot Package
Version: 0.0.1.0
Authors@R: 
    person(given = "First",
           family = "Last",
           role = c("aut", "cre"),
           email = "first.last@example.com",
           comment = c(ORCID = "YOUR-ORCID-ID"))
Description: The function included in this package lets you explore power and effect size. When used with the {manipulate} package, you can use the sliders to set mu_0 and mu_A for a one-sample test (or, alternatively, think about these as mu_1 and mu_2 for a two-sample test), sigma, alpha, and n, and you can choose whether you are testing a one-sided hypothesis of mu_A being "greater" or "less" than mu_0 or are testing the two-sided hypothesis that mu_A != mu_0 ("two.tailed"). The graph will output Power and Effect Size.
Depends: R (&gt;= 4.3)
License: GPL-3
Encoding: UTF-8
LazyData: true</code></pre>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> Be sure to end the DESCRIPTION file with a carriage return or you may get errors in running the “Process the Documentation Files”). Also not that you might want to edit the <code>Depends: R (&gt;=...)</code> line to an earlier version of <strong><em>R</em></strong> (e.g., <code>Depends: R (&gt;= 3.5)</code>) if you have not updated your version of <strong><em>R</em></strong> recently.</p>
</blockquote>
</section>
<section id="add-function-code" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="add-function-code">Add Function Code</h3>
<p>You are now ready to add code to your package, which you will do by adding files to the <code>R/</code> subdirectory inside the package directory created by one of the methods above. Code you will include in packages is a bit different than the scripts you have been writing or “.Rmd” documents… usually, you will be using code in packages to create custom functions or objects.</p>
<p>When you build a package, all of the code in the <code>R/</code> directory is executed and saved in a format that <strong><em>R</em></strong> can read. Then, when you load in the package, the saved (or “cached”) results are available for you to use.</p>
<p>If you used <strong>Method 1</strong>, you can simply edit the “hello.R” file adding the code for the function(s) you want to bundle into your package (changing the name of the file if you like). If you used <strong>Method 2</strong>, you can simply create a new “.R” script file containing the function(s) you want to bundle into your package inside the <code>R</code> folder within your package directory. For example, I designed the following function, <code>power.plot()</code> for <a href="17-module.html"><strong>Module 17</strong></a> that lets a user explore the relationship between sample size, alpha level, mean, standard deviation, and power. I used the code below and saved this function in a file called “powerplot.R”.</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> In the code below, I have prefaced all {ggplot2} library function calls with “ggplot2::” as these are not included in {base} <strong><em>R</em></strong>. This will become important in a minute.</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>power.plot <span class="ot">&lt;-</span> <span class="cf">function</span>(sigma, mu0, muA, n, alpha, <span class="at">alternative =</span> <span class="st">"two.tailed"</span>) {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    pow <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> (muA <span class="sc">-</span> mu0)<span class="sc">/</span>(sigma<span class="sc">/</span><span class="fu">sqrt</span>(n))</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    g <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">mu =</span> <span class="fu">c</span>(<span class="fu">min</span>(mu0 <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)), <span class="fu">max</span>(mu0 <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)))),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> mu)) <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(<span class="st">"Power Calculations for Z Tests"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(<span class="fu">dnorm</span>(mu0, mu0, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.1</span>, <span class="fu">dnorm</span>(muA,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.1</span>)))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, <span class="at">geom =</span> <span class="st">"line"</span>, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> mu0,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">sd =</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">show.legend =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, <span class="at">geom =</span> <span class="st">"line"</span>, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> muA,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">sd =</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">show.legend =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (alternative <span class="sc">==</span> <span class="st">"greater"</span>) {</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>            xcrit <span class="ot">=</span> mu0 <span class="sc">+</span> <span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> alpha) <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>            g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_segment</span>(<span class="at">x =</span> xcrit, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> xcrit, <span class="at">yend =</span> <span class="fu">max</span>(<span class="fu">dnorm</span>(mu0,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                mu0, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>, <span class="fu">dnorm</span>(muA, muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>),</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="dv">3</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>            g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_polygon</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(<span class="at">x =</span> <span class="fu">c</span>(xcrit, <span class="fu">seq</span>(<span class="at">from =</span> xcrit,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">to =</span> muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">length.out =</span> <span class="dv">100</span>), muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)),</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">dnorm</span>(<span class="fu">seq</span>(<span class="at">from =</span> xcrit, <span class="at">to =</span> muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">length.out =</span> <span class="dv">100</span>),</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>                  <span class="at">mean =</span> muA, <span class="at">sd =</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)), <span class="dv">0</span>))), ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y),</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>            pow <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">-</span> <span class="fu">pnorm</span>(xcrit,</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>                muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n))</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (alternative <span class="sc">==</span> <span class="st">"less"</span>) {</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (z <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>            xcrit <span class="ot">=</span> mu0 <span class="sc">-</span> <span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> alpha) <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>            g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_segment</span>(<span class="at">x =</span> xcrit, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> xcrit, <span class="at">yend =</span> <span class="fu">max</span>(<span class="fu">dnorm</span>(mu0,</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>                mu0, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>, <span class="fu">dnorm</span>(muA, muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>),</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="dv">3</span>)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>            g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_polygon</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(<span class="at">x =</span> <span class="fu">c</span>(muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>                sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="fu">seq</span>(<span class="at">from =</span> muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">to =</span> xcrit, <span class="at">length.out =</span> <span class="dv">100</span>),</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>                xcrit), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">dnorm</span>(<span class="fu">seq</span>(<span class="at">from =</span> muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">to =</span> xcrit,</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>                <span class="at">length.out =</span> <span class="dv">100</span>), <span class="at">mean =</span> muA, <span class="at">sd =</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)), <span class="dv">0</span>))), ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> x,</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> y), <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>            pow <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(xcrit, muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">-</span> <span class="fu">pnorm</span>(muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n),</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>                muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n))</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (alternative <span class="sc">==</span> <span class="st">"two.tailed"</span>) {</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>            xcrit <span class="ot">=</span> mu0 <span class="sc">+</span> <span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> alpha<span class="sc">/</span><span class="dv">2</span>) <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>            g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_segment</span>(<span class="at">x =</span> xcrit, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> xcrit, <span class="at">yend =</span> <span class="fu">max</span>(<span class="fu">dnorm</span>(mu0,</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>                mu0, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>, <span class="fu">dnorm</span>(muA, muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>),</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="dv">3</span>)</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>            g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_polygon</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(<span class="at">x =</span> <span class="fu">c</span>(xcrit, <span class="fu">seq</span>(<span class="at">from =</span> xcrit,</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>                <span class="at">to =</span> muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">length.out =</span> <span class="dv">100</span>), muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)),</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">dnorm</span>(<span class="fu">seq</span>(<span class="at">from =</span> xcrit, <span class="at">to =</span> muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">length.out =</span> <span class="dv">100</span>),</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>                  <span class="at">mean =</span> muA, <span class="at">sd =</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)), <span class="dv">0</span>))), ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y),</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>            pow <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">-</span> <span class="fu">pnorm</span>(xcrit,</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>                muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n))</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (z <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>            xcrit <span class="ot">=</span> mu0 <span class="sc">-</span> <span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> alpha<span class="sc">/</span><span class="dv">2</span>) <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>            g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_segment</span>(<span class="at">x =</span> xcrit, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> xcrit, <span class="at">yend =</span> <span class="fu">max</span>(<span class="fu">dnorm</span>(mu0,</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>                mu0, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>, <span class="fu">dnorm</span>(muA, muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>),</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="dv">3</span>)</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>            g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_polygon</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(<span class="at">x =</span> <span class="fu">c</span>(muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>                sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="fu">seq</span>(<span class="at">from =</span> muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">to =</span> xcrit, <span class="at">length.out =</span> <span class="dv">100</span>),</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>                xcrit), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">dnorm</span>(<span class="fu">seq</span>(<span class="at">from =</span> muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">to =</span> xcrit,</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>                <span class="at">length.out =</span> <span class="dv">100</span>), <span class="at">mean =</span> muA, <span class="at">sd =</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)), <span class="dv">0</span>))), ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> x,</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> y), <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>            pow <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(xcrit, muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">-</span> <span class="fu">pnorm</span>(muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n),</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>                muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n))</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>    g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">max</span>(mu0, muA) <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">y =</span> <span class="fu">max</span>(<span class="fu">dnorm</span>(mu0,</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>        mu0, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.075</span>, <span class="fu">dnorm</span>(muA, muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.075</span>), <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Effect Size = "</span>,</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>((muA <span class="sc">-</span> mu0)<span class="sc">/</span>sigma, <span class="at">digits =</span> <span class="dv">3</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">Power = "</span>, <span class="fu">round</span>(pow, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">""</span>))</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>    g <span class="ot">&lt;-</span> g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">min</span>(mu0, muA) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> sigma<span class="sc">/</span><span class="fu">sqrt</span>(n), <span class="at">y =</span> <span class="fu">max</span>(<span class="fu">dnorm</span>(mu0,</span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>        mu0, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.075</span>, <span class="fu">dnorm</span>(muA, muA, sigma<span class="sc">/</span><span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.075</span>), <span class="at">label =</span> <span class="st">"Red = mu0</span><span class="sc">\n</span><span class="st">Blue = muA"</span>)</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>    g</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> We can either create separate <strong><em>R</em></strong> script files (“.R” files) for each function we want to include in our package <strong>or</strong> we can include multiple functions in each of one or more files. If we do the latter, we just need to include function documentation comments (described below) before each function.</p>
</blockquote>
<section id="important-caveats-about-package-code" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="important-caveats-about-package-code">Important Caveats about Package Code</h4>
<ul>
<li>Do not include “top level” code…</li>
</ul>
<p>Top level code (e.g., code outside of a function) is only run at build time, which can create problems if the code in your package functions utilizes or “depends upon” a function from another package. For example, if you want to create a function that creates a special kind of formating for a {ggplot2} plot object, and your function calls <code>ggplot()</code>, that is an example of a “dependency”. But, you should NOT include <code>library(ggplot2)</code> as top-level code in your package, because it will give you a problem at run time if {ggplot2} is not already loaded. Rather, you should describe all of the packages your code needs to run in the <code>DESCRIPTION</code> file (see Step [5] below).</p>
<ul>
<li><p>Be cautious about including in your package functions code that messes with the <strong><em>R</em></strong> environment. In general…</p>
<ul>
<li>Do not use <code>library()</code> or <code>require()</code></li>
<li>Do not use <code>source()</code></li>
<li>Do not modify a global option using <code>options()</code> unless you store the original setting(s) and then reset them <code>on.exit()</code> from your package function</li>
</ul></li>
</ul>
<p><strong>EXAMPLE:</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># within your function, you could include the following...  save the default</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># value for number of significant digits to print</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>original <span class="ot">&lt;-</span> <span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">7</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># change that global option</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># change the global option back on exit</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">on.exit</span>(<span class="fu">options</span>(original), <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Do not modify the working directory, e.g., with <code>setwd()</code>, unless you set it back <code>on.exit()</code> from your package function</li>
</ul>
<p><strong>EXAMPLE:</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in your function, you could include the following...  save the default value</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for working directory</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>original <span class="ot">&lt;-</span> <span class="fu">setwd</span>(<span class="fu">tempdir</span>())</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># change that global option</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Desktop"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># change the global option back on exit</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">on.exit</span>(<span class="fu">setwd</span>(original), <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="add-function-documentation" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="add-function-documentation">Add Function Documentation</h3>
<p>We next add documentation to our <strong><em>R</em></strong> script containing the <code>power.plot()</code> function by adding special structured comments to the begining of the “.R” file. These comments begin with <code>#'</code> and then include certain parameter tags, marked with <code>@</code>. These comments will be read and compiled into the correct format for showing in the help/documentation files for our package when we build the package using {devtools} and {roxygen2}. Details for common parameter tags can be found in online {roxygen2} documentation, e.g., <a href="https://rstats-pkgs.readthedocs.io/en/latest/roxygen2.html#common-roxygen2-tags">here</a> or <a href="https://bookdown.org/rdpeng/RProgDA/documentation.html#common-roxygen2-tags">here</a>.</p>
<p>Minimally, we want to add the following tags to our file.</p>
<ul>
<li><code>@title</code></li>
<li><code>@description</code></li>
<li><code>@param</code> - one line for each parameter in our function</li>
<li><code>@keywords</code> - to aid in searching functions</li>
<li><code>@export</code> - makes the function available for others to use when your package is loaded</li>
<li><code>@examples</code> - sample code</li>
</ul>
<p>For my file, I added the text below just before the <code>power.plot()</code> function.</p>
<p>#’ <span class="citation" data-cites="title">(<a href="#ref-title" role="doc-biblioref"><strong>title?</strong></a>)</span> An interactive power plotting function #’ <span class="citation" data-cites="description">(<a href="#ref-description" role="doc-biblioref"><strong>description?</strong></a>)</span> This function allows you explore the relationship between sample size, alpha level, mean, standard deviation, and power #’ <span class="citation" data-cites="param">(<a href="#ref-param" role="doc-biblioref"><strong>param?</strong></a>)</span> sigma standard deviation #’ <span class="citation" data-cites="param">(<a href="#ref-param" role="doc-biblioref"><strong>param?</strong></a>)</span> mu0 mean value under the null hypothesis #’ <span class="citation" data-cites="param">(<a href="#ref-param" role="doc-biblioref"><strong>param?</strong></a>)</span> muA mean value under the alternative hypothesis #’ <span class="citation" data-cites="param">(<a href="#ref-param" role="doc-biblioref"><strong>param?</strong></a>)</span> n sample size #’ <span class="citation" data-cites="param">(<a href="#ref-param" role="doc-biblioref"><strong>param?</strong></a>)</span> alpha alpha level #’ <span class="citation" data-cites="param">(<a href="#ref-param" role="doc-biblioref"><strong>param?</strong></a>)</span> alternative type of test to run, defaults to “two-tailed” #’ <span class="citation" data-cites="keywords">(<a href="#ref-keywords" role="doc-biblioref"><strong>keywords?</strong></a>)</span> power #’ <span class="citation" data-cites="export">(<a href="#ref-export" role="doc-biblioref"><strong>export?</strong></a>)</span> #’ <span class="citation" data-cites="examples">(<a href="#ref-examples" role="doc-biblioref"><strong>examples?</strong></a>)</span> #’ power.plot(sigma=0.5, mu0=1, muA=1, n=25, alpha=0.05, alternative=“two.tailed”)</p>
</section>
<section id="add-dependencies" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="add-dependencies">Add Dependencies</h3>
<p>Because I know that the function I just created uses functions from {ggplot2}, I want to add a reference to that package as a dependency to my DESCRIPTION file. To do this, I can run the following at the command line where I am developing my package:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This function adds the following lines to the DESCRIPTION file:</p>
<p>Imports: ggplot2</p>
<p>Also, because I tend to use this function inside of a function from {manipulate} (see <a href="17-module.html"><strong>Module 17</strong></a>), I also run the following…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"manipulate"</span>, <span class="st">"Suggests"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>… to add a “Suggests” block to the DESCRIPTION file:</p>
<p>Suggests: manipulate</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> You should open the DESCRIPTION file with the <strong><em>RStudio</em></strong> text editor to confirm that these “Imports” and “Suggests” statements have been added.</p>
</blockquote>
</section>
<section id="create-documentation-files" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="create-documentation-files">Create Documentation Files</h3>
<p>Next, we create an “.R” script file that includes {roxygen2} comments that will produce documentation about the package itself, and we place that file in the <code>R</code> subdirectory with all of our other “.R” files. The <code>use_package_doc()</code> function from {usethis} will create a template for this file for us, with the default name of “<em>package name</em>-package.R”</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package_doc</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="process-documentation-files" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="process-documentation-files">Process Documentation Files</h3>
<p>To now automatically create help/documentation files for our packages and the functions it contain from the comment annotations we included in the “.R” files in the <code>R</code> directory, we run the <code>document()</code> function from {devtools}.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This function automatically creates one or more “.Rd” (<strong>RDocument</strong>) files and places them in the <code>man</code> (i.e., “manual”) directory, creating that directory if it does not already exist. It also adds a NAMESPACE file to the main package directory, if that does not already exist, or rewrites that file if it does.</p>
</section>
<section id="build-the-package" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="build-the-package">Build the Package</h3>
<p>The next thing we do is to bundle up all of the elements in our package directory into a single file and create a compressed version of that file. We do this by runnning the <code>build()</code> function from {devtools}. If we are in the package directory itself, then we do not need to specify an argument to <code>build()</code>, but we can provide <code>build()</code> with a path to the package directory if needed.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>()  <span class="co"># or</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>(<span class="st">"~/Development/Repos/powerplot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> When we run <code>build()</code>, we might get the message “Warning: invalid uid value replaced by that for user ‘nobody’”. You can safely ignore that warning.</p>
</blockquote>
<p>Running <code>build()</code> creates a “.tar.gz” file for your package in the parent directory of your package directory. This file is basically a compressed (“.gz”) version of a bundled (“.tar”) file that contains all of the important components of your <strong><em>R</em></strong> package… the function files in the <code>R</code> folder, the DESCRIPTION and NAMESPACE files, and the <code>man</code> folder containining RDocument document files (“.Rd”) for your package’s functions.</p>
</section>
<section id="install-and-load-the-package" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="install-and-load-the-package">Install and Load the Package</h3>
<p>We can now install this package into our working environment and check out our new documentation. The {devtools} function <code>load_all()</code>, executed from inside the package directory, will load your package into memory.</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> With this command, your package will not be installed into your system or user library and will disappear when you restart <strong><em>R</em></strong>. This also will not load any vignettes you have created (see below).</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now try out your new function! First, use <code>library(powerplot)</code> to load in your library. Then, here is what you should see in the “Help” tab when you type “?power.plot” at console line.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/power.plot-help.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
<p>You can also install your package to your system or user library by using the {devtools} function <code>install()</code>. Here, I am installing to my user library.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install</span>()</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(withr)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">with_libpaths</span>(<span class="st">"/Users/ad26693/Library/R/arm64/4.3/library"</span>, <span class="at">code =</span> devtools<span class="sc">::</span><span class="fu">install</span>())</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># the code about puts my new {powerplot} package into my user library by</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># default... if I wanted to install it to my system library, I could provide</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># the path to that location instead</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>withr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also use the {base} function <code>install.packages()</code> function with the path to the “.tar.gz” file you created with <code>build()</code> as an argument. Here, we use <code>repos=NULL</code> because we are installing from a local file and we set <code>type=source</code> as we’re installing a bundled, compressed source file. In the code below, I have set <code>lib=</code> to be the location of my system library, but you can instead use a user library (as we did above).</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> You may need to change the path depending on your operating system (the path below is a common one for MacOS users) and on where your system library is located. You may also need to have administrator privileges to successfully install to that location.</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Development/Repos/powerplot_0.0.1.0.tar.gz"</span>, <span class="at">repos =</span> <span class="cn">NULL</span>, <span class="at">type =</span> <span class="st">"source"</span>,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">lib =</span> <span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> You may occasionally need to restart <strong><em>R</em></strong> after installing (or removing) a package in order to be able to access it. If, after installing your package and running <code>library()</code>, you cannot visualize the documentaton in the <strong>Help</strong> tab, try restarting <strong><em>R</em></strong> with the following command: <code>.rs.restartR()</code></p>
</blockquote>
</section>
<section id="check-the-package-for-errors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="check-the-package-for-errors">Check the Package for Errors</h3>
<p>It is always a good idea to run certain tests on your package to make sure that it is constructed correctly before distributing it to others to install, either as a built file or via the Comprehensive R Archive Network (CRAN). The terminal function <code>R CMD check</code> is one way to run a series of automated checks. To do this, open a terminal window and navigate to the directory containing the “.tar.gz” file (which should be the parent directory for your <strong><em>R</em></strong> package), and then run:</p>
<p>R CMD check powerplot_0.0.1.0.tar.gz</p>
<p>This can also be done from <strong><em>R</em></strong> using {devtools} from inside the package directory.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>EXAMPLE:</strong> Using the Package you Just Created</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(manipulate)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">manipulate</span>(<span class="fu">power.plot</span>(sigma, muA, mu0, n, alpha, alternative), <span class="at">sigma =</span> <span class="fu">slider</span>(<span class="dv">1</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">4</span>, <span class="at">step =</span> <span class="fl">0.1</span>, <span class="at">initial =</span> <span class="dv">2</span>), <span class="at">muA =</span> <span class="fu">slider</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="at">step =</span> <span class="fl">0.1</span>, <span class="at">initial =</span> <span class="dv">2</span>),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mu0 =</span> <span class="fu">slider</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="at">step =</span> <span class="fl">0.1</span>, <span class="at">initial =</span> <span class="dv">0</span>), <span class="at">n =</span> <span class="fu">slider</span>(<span class="dv">1</span>, <span class="dv">50</span>, <span class="at">step =</span> <span class="dv">1</span>, <span class="at">initial =</span> <span class="dv">16</span>),</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fu">slider</span>(<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="at">step =</span> <span class="fl">0.01</span>, <span class="at">initial =</span> <span class="fl">0.05</span>), <span class="at">alternative =</span> <span class="fu">picker</span>(<span class="st">"two.tailed"</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"greater"</span>, <span class="st">"less"</span>))</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>manipulate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="writing-a-vignette" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="writing-a-vignette">Writing a Vignette</h2>
<p>To include an <strong>R Markdown</strong> document as a vignette in your <strong><em>R</em></strong> package, all you need to do is:</p>
<ul>
<li>Create a <code>vignettes</code> subdirectory within the package directory.</li>
<li>Put your vignette “.Rmd” file in that directory.</li>
<li>Within the YAML header at the top of the “.Rmd” file, include code like the following:</li>
</ul>
<!-- -->
<pre><code>---
title: "Put the title of your vignette here"
output: rmarkdown::html_vignette
vignette: &gt;
  %\VignetteIndexEntry{Put the title of your vignette here}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---</code></pre>
<ul>
<li>And add the following lines to your package’s DESCRIPTION file:</li>
</ul>
<!-- -->
<pre><code>Suggests: knitr, rmarkdown
VignetteBuilder: knitr</code></pre>
<p>The command <code>use_vignette()</code> from {usethis} will do all of this for us and give us a template “.Rmd” file we can edit for our vignette…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_vignette</span>(<span class="st">"powerplot"</span>, <span class="at">title =</span> <span class="st">"Power Plot Vignette"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once you have your “.Rmd” file completed, can build (i.e., “knit”) your vignette using…</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build_vignettes</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The resulting rendered “.html” version of your vignette will be placed into the <code>inst/doc</code> folder inside the package directory.</p>
<p>After creating your vignette, you should run <code>build()</code> again to bundle the vignette into your “.tar.gz” package file.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternatively, you can run <code>R CMD build</code> from a terminal prompt from inside the package directory to build a “.tar.gz” file that contains the “.html” version of the vignette.</p>
<p>Then, you can run <code>install()</code> (or <code>install_packages()</code>), <code>and library()</code> again to pull the new package with vignette into <strong><em>R</em></strong>.</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> If you use <code>install()</code>, be sure to include the argument “build_vignettes=TRUE” to ensure that the vignette is bundled with your package and installed.</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install</span>(<span class="at">build_vignettes =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(withr)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">with_libpaths</span>(<span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>, <span class="at">code =</span> devtools<span class="sc">::</span><span class="fu">install</span>(<span class="at">build_vignettes =</span> <span class="cn">TRUE</span>))</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># again, this puts powerplot in my system library instead of my user library...</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>withr)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Development/Repos/powerplot_0.0.1.0.tar.gz"</span>, <span class="at">repos =</span> <span class="cn">NULL</span>, <span class="at">type =</span> <span class="st">"source"</span>,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">lib =</span> <span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(powerplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check that your package now appears in the <strong>Packages</strong> tab and that clicking on its link takes you to the package documentation page with a hyperlink for “User guides, package vignettes, and other documentation”. If the package does not show up there, you may need to restart <strong><em>R</em></strong> (using <code>.rs.restartR()</code>).</p>
</section>
<section id="including-a-custom-dataset" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="including-a-custom-dataset">Including a Custom Dataset</h2>
<p>It is often useful to include example datasets in your <strong><em>R package</em></strong> to use in examples or vignettes or to illustrate a data format.</p>
<p>To include a dataset in your package, you would create a <code>data</code> subdirectory inside of the package directory and place your dataset there, in “.RData” format (using the extension “.RData” or “.rda”).</p>
<p>You can use the <code>use_data()</code> function from {use_this} to create the data directory and populate it with data from a dataframe.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-2024-datasets/main/zombies.csv"</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>zombies <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_data</span>(zombies, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># overwrite argument replaces the data if it already exists</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also use the <code>save()</code> function to create such files as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(zombies, <span class="at">file =</span> <span class="st">"data/zombies.RData"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(zombies, <span class="at">file =</span> <span class="st">"data/zombies.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, run <code>document()</code> and <code>build()</code>again as above to create the package anew with the data included in it, and run <code>install()</code> and <code>library()</code> to load it into your workspace. Voíla!</p>
</section>
<section id="sharing-your-package" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sharing-your-package">Sharing Your Package</h2>
<p>To share your package with another user, simply pass them the “.tar.gz” file and let them run <code>install_packages()</code> with the argument “type=source”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Development/Repos/powerplot_0.0.1.0.tar.gz"</span>, <span class="at">repos =</span> <span class="cn">NULL</span>, <span class="at">type =</span> <span class="st">"source"</span>,</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">lib =</span> <span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="an-example-with-vignette-and-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="an-example-with-vignette-and-data">An Example with Vignette and Data</h2>
<p>For your group project, you may find that you do not need to write your own custom functions, but you will still need to create a vignette and a dataset to distribute. Here, I demonstrate creating such a package based on <a href="21-module.html"><strong>Module 21</strong></a> on multiple regression and ANCOVA.</p>
<section id="create-the-package-directory-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="create-the-package-directory-1">Create the Package Directory</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_package</span>(<span class="st">"~/Development/Repos/multireg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This should open a new <strong><em>RStudio</em></strong> session… then, in that session…</p>
</section>
<section id="edit-the-description-file-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="edit-the-description-file-1">Edit the DESCRIPTION File</h3>
<p>Just open the file, edit, and save (make sure the last line remains a line break)!</p>
<p>Package: multireg Title: A module for demonstrating multiple regression and ANCOVA Version: 0.0.1.0 Authors@R: person(given = “Anthony”, family = “Di Fiore”, role = c(“aut”, “cre”), email = “anthony.difiore@austin.utexas.edu”, comment = c(ORCID = “YOUR-ORCID-ID”)) Description: This module is used to demonstrate building a package that contains a vignette about running multiple regression using an included dataset. License: GPL-3 Encoding: UTF-8 LazyData: true</p>
</section>
<section id="add-dependencies-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="add-dependencies-1">Add Dependencies</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"car"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"jtools"</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"sjPlot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-documentation-files-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="create-documentation-files-1">Create Documentation Files</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package_doc</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="add-a-vignette-template" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="add-a-vignette-template">Add a Vignette Template</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_vignette</span>(<span class="st">"vignette"</span>, <span class="at">title =</span> <span class="st">"Multiple Regression and ANCOVA Vignette"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, edit the vignette “.Rmd” file as you see fit!</p>
<p>As an example, you can copy and paste the text and code below (the <strong><em>R</em></strong> code will need to be put in a code block) to the end of the vignette “.Rmd” file:</p>
<hr>
<p>The following code uses the <strong>zombies</strong> dataset bundled in the {multireg} package to run a linear model of height as a function of weight, age, and gender among survivors of the zombie apocalypse. Is the overall model significant? Are both predictor variables significant when the other is controlled for?</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jtools)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjPlot)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(zombies)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>zombies<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(zombies<span class="sc">$</span>gender)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> zombies, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> height)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>))</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> zombies, height <span class="sc">~</span> weight <span class="sc">+</span> age <span class="sc">+</span> gender)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m)</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(m)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">fitted</span>(m), <span class="fu">residuals</span>(m))</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">residuals</span>(m))</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_summs</span>(m, <span class="at">plot.distributions =</span> <span class="cn">TRUE</span>, <span class="at">rescale.distributions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="fu">tab_model</span>(m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="add-a-data-directory-and-data" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="add-a-data-directory-and-data">Add a Data Directory and Data</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># first, get the data to use...</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-2024-datasets/main/zombies.csv"</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>zombies <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co"># then, write this out as an R data file</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_data</span>(zombies)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="build-vignettes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="build-vignettes">Build Vignettes</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build_vignettes</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="process-the-documentation-files" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="process-the-documentation-files">Process the Documentation Files</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="build-the-package-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="build-the-package-1">Build the Package</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="install-the-package" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="install-the-package">Install the Package</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install</span>(<span class="at">build_vignettes =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Development/Repos/multireg_0.0.1.0.tar.gz"</span>, <span class="at">repos =</span> <span class="cn">NULL</span>, <span class="at">type =</span> <span class="st">"source"</span>,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lib =</span> <span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-the-package-for-errors-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="check-the-package-for-errors-1">Check the Package for Errors</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-and-use-the-package" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="load-and-use-the-package">Load and Use the Package</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(multireg)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(zombies)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">vignette</span>(<span class="at">package =</span> <span class="st">"multireg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, CHECK OUT YOUR VIGNETTE AND DATA!!!</p>
<blockquote class="blockquote">
<p><strong>NOTE</strong>: You may need to restart <strong><em>R</em></strong> before you <code>library()</code> your package to get the package manager to refresh with your newly built package and any vignettes to appear properly.</p>
</blockquote>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./24-module.html" class="pagination-link  aria-label=" &lt;span="" effects="" or="" multilevel="" modeling&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Mixed Effects or Multilevel Modeling</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./27-python-from-R.html" class="pagination-link" aria-label="<span class='chapter-number'>26</span>&nbsp; <span class='chapter-title'>Using ***Python*** from ***R***</span>">
        <span class="nav-page-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Using <strong><em>Python</em></strong> from <strong><em>R</em></strong></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb39" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Building Custom ***R*** Packages {#module-25}</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Objectives {.unnumbered}</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; This module provides an overview of how to build and distribute your own, custom ***R*** package. An ***R*** package bundles together code, data, and documentation [1] using a set of standard conventions for organizing the components of the bundle and [2] in a way that is easily reusable, shareable, and distributable. Below, we go through some examples of how to create bare-minimum ***R*** packages. This module is based heavily and shamelessly on material from the following sources:</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Writing an R Package from Scratch</span><span class="co">](https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/)</span>, by Hilary Parker</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Making your First R Package</span><span class="co">](http://tinyheero.github.io/jekyll/update/2015/07/26/making-your-first-R-package.html)</span>, by Fong Chun Chan</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Writing an R Package from Scratch</span><span class="co">](https://r-mageddon.netlify.com/post/writing-an-r-package-from-scratch/)</span>, by Thomas Westlake</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">R Package Primer</span><span class="co">](https://kbroman.org/pkg_primer/)</span>, by Karl Broman</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preliminaries {.unnumbered}</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Install and load these packages: <span class="co">[</span><span class="ot">{devtools}</span><span class="co">](https://cran.r-project.org/web/packages/devtools/devtools.pdf)</span> and <span class="co">[</span><span class="ot">{roxygen2}</span><span class="co">](https://cran.r-project.org/web/packages/roxygen2/roxygen2.pdf)</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Install this package: <span class="co">[</span><span class="ot">{withr}</span><span class="co">](https://cran.r-project.org/web/packages/withr/withr.pdf)</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Load {tidyverse} and {usethis}</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Additionally, make sure you have a ***C*** compiler installed on your computer. Many computers do, by default, but to be sure do the following:</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>On Windows, install <span class="co">[</span><span class="ot">RTools</span><span class="co">](https://cran.r-project.org/bin/windows/Rtools/)</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>On MacOS, make sure you have either the Mac software development IDE, <span class="co">[</span><span class="ot">XCode</span><span class="co">](https://developer.apple.com/xcode/)</span>, or the latest "Command-Line Tools for XCode" installed</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>To do the latter, open a Terminal window, run the command <span class="in">`xcode-select --install`</span>, and accept the license agreement</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** These are not ***R*** packages, but rather additional bits of software!</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(roxygen2)</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>Once you have done all of this, switch to the ***R*** console and run the command <span class="in">`has_devel()`</span>. If all is well, it should return the message "Your system is ready to build packages!"</span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a><span class="fu">## Steps for Creating a Package {.unnumbered}</span></span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a><span class="fu">### Create the Package Directory {.unnumbered}</span></span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a>First, we are going to create a directory with the bare minimum structure needed for an ***R*** package. As an illustration, we are going to make a package for a single custom function I created for [**Module 17**](#module-17) on statistical power and effect size. We can create a new package one of the following ways:</span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a><span class="fu">#### **Method 1:** {.unnumbered}</span></span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-44"><a href="#cb39-44" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Choose "File <span class="sc">\&gt;</span> New Project" and then following the dialog boxes to create a new project...</span>
<span id="cb39-45"><a href="#cb39-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-48"><a href="#cb39-48" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-49"><a href="#cb39-49" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb39-50"><a href="#cb39-50" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "70%"</span></span>
<span id="cb39-51"><a href="#cb39-51" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/new-project.png"</span>)</span>
<span id="cb39-52"><a href="#cb39-52" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-53"><a href="#cb39-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-54"><a href="#cb39-54" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Create the project in a new directory...</span>
<span id="cb39-55"><a href="#cb39-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-58"><a href="#cb39-58" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-59"><a href="#cb39-59" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb39-60"><a href="#cb39-60" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "70%"</span></span>
<span id="cb39-61"><a href="#cb39-61" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/project-type.png"</span>)</span>
<span id="cb39-62"><a href="#cb39-62" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-63"><a href="#cb39-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-64"><a href="#cb39-64" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>... choose the form of the project to be a "package"...</span>
<span id="cb39-65"><a href="#cb39-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-68"><a href="#cb39-68" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-69"><a href="#cb39-69" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb39-70"><a href="#cb39-70" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "70%"</span></span>
<span id="cb39-71"><a href="#cb39-71" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/create-package-from-GUI.png"</span>)</span>
<span id="cb39-72"><a href="#cb39-72" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-73"><a href="#cb39-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-74"><a href="#cb39-74" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>... and name your package (for this example, use the name "powerplot"), choose to create a ***git*** repository for the project, and choose to open it in a new session.</span>
<span id="cb39-75"><a href="#cb39-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-78"><a href="#cb39-78" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-79"><a href="#cb39-79" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb39-80"><a href="#cb39-80" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "70%"</span></span>
<span id="cb39-81"><a href="#cb39-81" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/new-package-from-GUI.png"</span>)</span>
<span id="cb39-82"><a href="#cb39-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-83"><a href="#cb39-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-84"><a href="#cb39-84" aria-hidden="true" tabindex="-1"></a>Once you create a new package project by this process, a new ***RStudio*** session will open, with the working directory set to the newly created directory for the package. you should see the following components:</span>
<span id="cb39-85"><a href="#cb39-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-86"><a href="#cb39-86" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>An <span class="in">`R/`</span> directory, which will hold your code files</span>
<span id="cb39-87"><a href="#cb39-87" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>A basic <span class="in">`DESCRIPTION`</span> file, which is a text file that contains metadata about your package</span>
<span id="cb39-88"><a href="#cb39-88" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>A <span class="in">`NAMESPACE`</span> file</span>
<span id="cb39-89"><a href="#cb39-89" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>A <span class="in">`man/`</span> directory, which will hold the manual pages for your package</span>
<span id="cb39-90"><a href="#cb39-90" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>An <span class="in">`.Rbuildignore file`</span>, which like <span class="in">`.gitignore`</span> is a list of files and directories that you do not want included with your package when you eventually "build" it (i.e., bundle it up into a single archive for distribution)</span>
<span id="cb39-91"><a href="#cb39-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-92"><a href="#cb39-92" aria-hidden="true" tabindex="-1"></a><span class="fu">#### **Method 2:** {.unnumbered}</span></span>
<span id="cb39-93"><a href="#cb39-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-94"><a href="#cb39-94" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Alternatively, you can accomplish much of this same setup by running the <span class="in">`create_packages()`</span> command from the {usethis} package. Specify as an argument to this function a <span class="sc">\&lt;</span>PATH NAME<span class="sc">\&gt;</span> to the package directory you want to create.</span>
<span id="cb39-95"><a href="#cb39-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-98"><a href="#cb39-98" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-99"><a href="#cb39-99" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-100"><a href="#cb39-100" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_package</span>(<span class="st">"~/Development/Repos/powerplot"</span>)</span>
<span id="cb39-101"><a href="#cb39-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-102"><a href="#cb39-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-103"><a href="#cb39-103" aria-hidden="true" tabindex="-1"></a>Running this function will also open a new ***RStudio*** session with the working directory set to the newly created directory for the package.</span>
<span id="cb39-104"><a href="#cb39-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-105"><a href="#cb39-105" aria-hidden="true" tabindex="-1"></a>You should find, again, that ***R*** has created a new directory with several subdirectories and files, including a DESCRIPTION file, and a NAMESPACE file, and an `R` directory. Note that `man` directory created in **Method 1** is not made here, nor is a ***git*** repository set up, but a **Build** tab is added to your ***RStudio*** IDE workspace.</span>
<span id="cb39-106"><a href="#cb39-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-109"><a href="#cb39-109" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-110"><a href="#cb39-110" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb39-111"><a href="#cb39-111" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "70%"</span></span>
<span id="cb39-112"><a href="#cb39-112" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/new-package-from-usethis.png"</span>)</span>
<span id="cb39-113"><a href="#cb39-113" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-114"><a href="#cb39-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-115"><a href="#cb39-115" aria-hidden="true" tabindex="-1"></a>Whichever method you use to create a new package, make sure you now work in the ***R*** session where your new project is active. Confirm that your working directory is set to be the new project directory using <span class="in">`getwd()`</span>.</span>
<span id="cb39-116"><a href="#cb39-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-119"><a href="#cb39-119" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-120"><a href="#cb39-120" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-121"><a href="#cb39-121" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb39-122"><a href="#cb39-122" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-123"><a href="#cb39-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-124"><a href="#cb39-124" aria-hidden="true" tabindex="-1"></a>If you need to set the working directory, use <span class="in">`setwd()`</span></span>
<span id="cb39-125"><a href="#cb39-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-128"><a href="#cb39-128" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-129"><a href="#cb39-129" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-130"><a href="#cb39-130" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Development/Repos/powerplot"</span>)</span>
<span id="cb39-131"><a href="#cb39-131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-132"><a href="#cb39-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-133"><a href="#cb39-133" aria-hidden="true" tabindex="-1"></a><span class="fu">### Edit the DESCRIPTION File {.unnumbered}</span></span>
<span id="cb39-134"><a href="#cb39-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-135"><a href="#cb39-135" aria-hidden="true" tabindex="-1"></a>Open up the newly created DESCRIPTION file, which was created as a template by either of the methods above. This is basically a structured text file that contains metadata for your package. You can edit this by hand as you see fit and then save it.</span>
<span id="cb39-136"><a href="#cb39-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-137"><a href="#cb39-137" aria-hidden="true" tabindex="-1"></a>The *Package* line displays the name of the package. The *Version* line indicates a version number for your package and should be updated as you revise your package. The *Title* and *Description* lines give a broad understanding of the purpose of your package. The *Author* and *Maintainer* lines (created by Method 1) and the [*Author\@R*](mailto:Author@R){.email} line (created by Method 2) include information on who the author ("aut") and maintainer ("cre") of the package are and should be replaced with your information. The *License* line indicates under what conditions your code can be used. For the package we are creating, you can use the following:</span>
<span id="cb39-138"><a href="#cb39-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-139"><a href="#cb39-139" aria-hidden="true" tabindex="-1"></a><span class="in">    Package: powerplot</span></span>
<span id="cb39-140"><a href="#cb39-140" aria-hidden="true" tabindex="-1"></a><span class="in">    Title: Power Plot Package</span></span>
<span id="cb39-141"><a href="#cb39-141" aria-hidden="true" tabindex="-1"></a><span class="in">    Version: 0.0.1.0</span></span>
<span id="cb39-142"><a href="#cb39-142" aria-hidden="true" tabindex="-1"></a><span class="in">    Authors@R: </span></span>
<span id="cb39-143"><a href="#cb39-143" aria-hidden="true" tabindex="-1"></a><span class="in">        person(given = "First",</span></span>
<span id="cb39-144"><a href="#cb39-144" aria-hidden="true" tabindex="-1"></a><span class="in">               family = "Last",</span></span>
<span id="cb39-145"><a href="#cb39-145" aria-hidden="true" tabindex="-1"></a><span class="in">               role = c("aut", "cre"),</span></span>
<span id="cb39-146"><a href="#cb39-146" aria-hidden="true" tabindex="-1"></a><span class="in">               email = "first.last@example.com",</span></span>
<span id="cb39-147"><a href="#cb39-147" aria-hidden="true" tabindex="-1"></a><span class="in">               comment = c(ORCID = "YOUR-ORCID-ID"))</span></span>
<span id="cb39-148"><a href="#cb39-148" aria-hidden="true" tabindex="-1"></a><span class="in">    Description: The function included in this package lets you explore power and effect size. When used with the {manipulate} package, you can use the sliders to set mu_0 and mu_A for a one-sample test (or, alternatively, think about these as mu_1 and mu_2 for a two-sample test), sigma, alpha, and n, and you can choose whether you are testing a one-sided hypothesis of mu_A being "greater" or "less" than mu_0 or are testing the two-sided hypothesis that mu_A != mu_0 ("two.tailed"). The graph will output Power and Effect Size.</span></span>
<span id="cb39-149"><a href="#cb39-149" aria-hidden="true" tabindex="-1"></a><span class="in">    Depends: R (&gt;= 4.3)</span></span>
<span id="cb39-150"><a href="#cb39-150" aria-hidden="true" tabindex="-1"></a><span class="in">    License: GPL-3</span></span>
<span id="cb39-151"><a href="#cb39-151" aria-hidden="true" tabindex="-1"></a><span class="in">    Encoding: UTF-8</span></span>
<span id="cb39-152"><a href="#cb39-152" aria-hidden="true" tabindex="-1"></a><span class="in">    LazyData: true</span></span>
<span id="cb39-153"><a href="#cb39-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-154"><a href="#cb39-154" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** Be sure to end the DESCRIPTION file with a carriage return or you may get errors in running the "Process the Documentation Files"). Also not that you might want to edit the `Depends: R (&gt;=...)` line to an earlier version of ***R*** (e.g., `Depends: R (&gt;= 3.5)`) if you have not updated your version of ***R*** recently.</span></span>
<span id="cb39-155"><a href="#cb39-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-156"><a href="#cb39-156" aria-hidden="true" tabindex="-1"></a><span class="fu">### Add Function Code {.unnumbered}</span></span>
<span id="cb39-157"><a href="#cb39-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-158"><a href="#cb39-158" aria-hidden="true" tabindex="-1"></a>You are now ready to add code to your package, which you will do by adding files to the <span class="in">`R/`</span> subdirectory inside the package directory created by one of the methods above. Code you will include in packages is a bit different than the scripts you have been writing or ".Rmd" documents... usually, you will be using code in packages to create custom functions or objects.</span>
<span id="cb39-159"><a href="#cb39-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-160"><a href="#cb39-160" aria-hidden="true" tabindex="-1"></a>When you build a package, all of the code in the <span class="in">`R/`</span> directory is executed and saved in a format that ***R*** can read. Then, when you load in the package, the saved (or "cached") results are available for you to use.</span>
<span id="cb39-161"><a href="#cb39-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-162"><a href="#cb39-162" aria-hidden="true" tabindex="-1"></a>If you used **Method 1**, you can simply edit the "hello.R" file adding the code for the function(s) you want to bundle into your package (changing the name of the file if you like). If you used **Method 2**, you can simply create a new ".R" script file containing the function(s) you want to bundle into your package inside the `R` folder within your package directory. For example, I designed the following function, `power.plot()` for [**Module 17**](#module-17) that lets a user explore the relationship between sample size, alpha level, mean, standard deviation, and power. I used the code below and saved this function in a file called "powerplot.R".</span>
<span id="cb39-163"><a href="#cb39-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-164"><a href="#cb39-164" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** In the code below, I have prefaced all {ggplot2} library function calls with "ggplot2::" as these are not included in {base} ***R***. This will become important in a minute.</span></span>
<span id="cb39-165"><a href="#cb39-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-168"><a href="#cb39-168" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-169"><a href="#cb39-169" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-170"><a href="#cb39-170" aria-hidden="true" tabindex="-1"></a>power.plot <span class="ot">&lt;-</span> <span class="cf">function</span>(sigma, mu0, muA, n, alpha,</span>
<span id="cb39-171"><a href="#cb39-171" aria-hidden="true" tabindex="-1"></a>  <span class="at">alternative =</span> <span class="st">"two.tailed"</span>){</span>
<span id="cb39-172"><a href="#cb39-172" aria-hidden="true" tabindex="-1"></a>  pow <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb39-173"><a href="#cb39-173" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> (muA <span class="sc">-</span> mu0) <span class="sc">/</span> (sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n))</span>
<span id="cb39-174"><a href="#cb39-174" aria-hidden="true" tabindex="-1"></a>  g <span class="ot">&lt;-</span></span>
<span id="cb39-175"><a href="#cb39-175" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">mu =</span> <span class="fu">c</span>(</span>
<span id="cb39-176"><a href="#cb39-176" aria-hidden="true" tabindex="-1"></a>      <span class="fu">min</span>(mu0 <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)),</span>
<span id="cb39-177"><a href="#cb39-177" aria-hidden="true" tabindex="-1"></a>      <span class="fu">max</span>(mu0 <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n))</span>
<span id="cb39-178"><a href="#cb39-178" aria-hidden="true" tabindex="-1"></a>    )), ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> mu)) <span class="sc">+</span></span>
<span id="cb39-179"><a href="#cb39-179" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ggtitle</span>(<span class="st">"Power Calculations for Z Tests"</span>)</span>
<span id="cb39-180"><a href="#cb39-180" aria-hidden="true" tabindex="-1"></a>  g <span class="ot">&lt;-</span></span>
<span id="cb39-181"><a href="#cb39-181" aria-hidden="true" tabindex="-1"></a>    g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(</span>
<span id="cb39-182"><a href="#cb39-182" aria-hidden="true" tabindex="-1"></a>      <span class="fu">dnorm</span>(mu0, mu0, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.1</span>,</span>
<span id="cb39-183"><a href="#cb39-183" aria-hidden="true" tabindex="-1"></a>      <span class="fu">dnorm</span>(muA, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.1</span></span>
<span id="cb39-184"><a href="#cb39-184" aria-hidden="true" tabindex="-1"></a>    )))</span>
<span id="cb39-185"><a href="#cb39-185" aria-hidden="true" tabindex="-1"></a>  g <span class="ot">&lt;-</span></span>
<span id="cb39-186"><a href="#cb39-186" aria-hidden="true" tabindex="-1"></a>    g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">stat_function</span>(</span>
<span id="cb39-187"><a href="#cb39-187" aria-hidden="true" tabindex="-1"></a>      <span class="at">fun =</span> dnorm,</span>
<span id="cb39-188"><a href="#cb39-188" aria-hidden="true" tabindex="-1"></a>      <span class="at">geom =</span> <span class="st">"line"</span>,</span>
<span id="cb39-189"><a href="#cb39-189" aria-hidden="true" tabindex="-1"></a>      <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> mu0, <span class="at">sd =</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)),</span>
<span id="cb39-190"><a href="#cb39-190" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb39-191"><a href="#cb39-191" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">"red"</span>,</span>
<span id="cb39-192"><a href="#cb39-192" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">TRUE</span></span>
<span id="cb39-193"><a href="#cb39-193" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-194"><a href="#cb39-194" aria-hidden="true" tabindex="-1"></a>  g <span class="ot">&lt;-</span></span>
<span id="cb39-195"><a href="#cb39-195" aria-hidden="true" tabindex="-1"></a>    g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">stat_function</span>(</span>
<span id="cb39-196"><a href="#cb39-196" aria-hidden="true" tabindex="-1"></a>      <span class="at">fun =</span> dnorm,</span>
<span id="cb39-197"><a href="#cb39-197" aria-hidden="true" tabindex="-1"></a>      <span class="at">geom =</span> <span class="st">"line"</span>,</span>
<span id="cb39-198"><a href="#cb39-198" aria-hidden="true" tabindex="-1"></a>      <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> muA, <span class="at">sd =</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)),</span>
<span id="cb39-199"><a href="#cb39-199" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb39-200"><a href="#cb39-200" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">"blue"</span>,</span>
<span id="cb39-201"><a href="#cb39-201" aria-hidden="true" tabindex="-1"></a>      <span class="at">show.legend =</span> <span class="cn">TRUE</span></span>
<span id="cb39-202"><a href="#cb39-202" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-203"><a href="#cb39-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-204"><a href="#cb39-204" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (alternative <span class="sc">==</span> <span class="st">"greater"</span>){</span>
<span id="cb39-205"><a href="#cb39-205" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (z<span class="sc">&gt;</span><span class="dv">0</span>){</span>
<span id="cb39-206"><a href="#cb39-206" aria-hidden="true" tabindex="-1"></a>      xcrit <span class="ot">=</span> mu0 <span class="sc">+</span> <span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> alpha) <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)</span>
<span id="cb39-207"><a href="#cb39-207" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span></span>
<span id="cb39-208"><a href="#cb39-208" aria-hidden="true" tabindex="-1"></a>        g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_segment</span>(<span class="at">x =</span> xcrit, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> xcrit,</span>
<span id="cb39-209"><a href="#cb39-209" aria-hidden="true" tabindex="-1"></a>          <span class="at">yend =</span> <span class="fu">max</span>(</span>
<span id="cb39-210"><a href="#cb39-210" aria-hidden="true" tabindex="-1"></a>            <span class="fu">dnorm</span>(mu0, mu0, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>,</span>
<span id="cb39-211"><a href="#cb39-211" aria-hidden="true" tabindex="-1"></a>            <span class="fu">dnorm</span>(muA, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb39-212"><a href="#cb39-212" aria-hidden="true" tabindex="-1"></a>          ), <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="dv">3</span>)</span>
<span id="cb39-213"><a href="#cb39-213" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span></span>
<span id="cb39-214"><a href="#cb39-214" aria-hidden="true" tabindex="-1"></a>        g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_polygon</span>(</span>
<span id="cb39-215"><a href="#cb39-215" aria-hidden="true" tabindex="-1"></a>          <span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(</span>
<span id="cb39-216"><a href="#cb39-216" aria-hidden="true" tabindex="-1"></a>            <span class="at">x =</span> <span class="fu">c</span>(xcrit, <span class="fu">seq</span>(<span class="at">from =</span> xcrit,</span>
<span id="cb39-217"><a href="#cb39-217" aria-hidden="true" tabindex="-1"></a>              <span class="at">to =</span> muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), <span class="at">length.out =</span> <span class="dv">100</span>),</span>
<span id="cb39-218"><a href="#cb39-218" aria-hidden="true" tabindex="-1"></a>              muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)),</span>
<span id="cb39-219"><a href="#cb39-219" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">dnorm</span>(<span class="fu">seq</span>(<span class="at">from =</span> xcrit,</span>
<span id="cb39-220"><a href="#cb39-220" aria-hidden="true" tabindex="-1"></a>              <span class="at">to =</span> muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), <span class="at">length.out =</span> <span class="dv">100</span>),</span>
<span id="cb39-221"><a href="#cb39-221" aria-hidden="true" tabindex="-1"></a>              <span class="at">mean =</span> muA, <span class="at">sd =</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)), <span class="dv">0</span>)</span>
<span id="cb39-222"><a href="#cb39-222" aria-hidden="true" tabindex="-1"></a>          )),</span>
<span id="cb39-223"><a href="#cb39-223" aria-hidden="true" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y), <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb39-224"><a href="#cb39-224" aria-hidden="true" tabindex="-1"></a>      pow <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), muA,</span>
<span id="cb39-225"><a href="#cb39-225" aria-hidden="true" tabindex="-1"></a>        sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">-</span> <span class="fu">pnorm</span>(xcrit, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n))</span>
<span id="cb39-226"><a href="#cb39-226" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-227"><a href="#cb39-227" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-228"><a href="#cb39-228" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (alternative <span class="sc">==</span> <span class="st">"less"</span>) {</span>
<span id="cb39-229"><a href="#cb39-229" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (z <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb39-230"><a href="#cb39-230" aria-hidden="true" tabindex="-1"></a>      xcrit <span class="ot">=</span> mu0 <span class="sc">-</span> <span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> alpha) <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)</span>
<span id="cb39-231"><a href="#cb39-231" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span></span>
<span id="cb39-232"><a href="#cb39-232" aria-hidden="true" tabindex="-1"></a>        g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_segment</span>(<span class="at">x =</span> xcrit, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> xcrit,</span>
<span id="cb39-233"><a href="#cb39-233" aria-hidden="true" tabindex="-1"></a>          <span class="at">yend =</span> <span class="fu">max</span>(</span>
<span id="cb39-234"><a href="#cb39-234" aria-hidden="true" tabindex="-1"></a>            <span class="fu">dnorm</span>(mu0, mu0, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>,</span>
<span id="cb39-235"><a href="#cb39-235" aria-hidden="true" tabindex="-1"></a>            <span class="fu">dnorm</span>(muA, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb39-236"><a href="#cb39-236" aria-hidden="true" tabindex="-1"></a>          ), <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="dv">3</span>)</span>
<span id="cb39-237"><a href="#cb39-237" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span></span>
<span id="cb39-238"><a href="#cb39-238" aria-hidden="true" tabindex="-1"></a>        g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_polygon</span>(</span>
<span id="cb39-239"><a href="#cb39-239" aria-hidden="true" tabindex="-1"></a>          <span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(</span>
<span id="cb39-240"><a href="#cb39-240" aria-hidden="true" tabindex="-1"></a>            <span class="at">x =</span> <span class="fu">c</span>(muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), <span class="fu">seq</span>(</span>
<span id="cb39-241"><a href="#cb39-241" aria-hidden="true" tabindex="-1"></a>              <span class="at">from =</span> muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n),</span>
<span id="cb39-242"><a href="#cb39-242" aria-hidden="true" tabindex="-1"></a>              <span class="at">to =</span> xcrit, <span class="at">length.out =</span> <span class="dv">100</span>), xcrit),</span>
<span id="cb39-243"><a href="#cb39-243" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">dnorm</span>(<span class="fu">seq</span>(</span>
<span id="cb39-244"><a href="#cb39-244" aria-hidden="true" tabindex="-1"></a>              <span class="at">from =</span> muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), <span class="at">to =</span> xcrit,</span>
<span id="cb39-245"><a href="#cb39-245" aria-hidden="true" tabindex="-1"></a>              <span class="at">length.out =</span> <span class="dv">100</span>), <span class="at">mean =</span> muA, <span class="at">sd =</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)), <span class="dv">0</span>)</span>
<span id="cb39-246"><a href="#cb39-246" aria-hidden="true" tabindex="-1"></a>          )),</span>
<span id="cb39-247"><a href="#cb39-247" aria-hidden="true" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y), <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb39-248"><a href="#cb39-248" aria-hidden="true" tabindex="-1"></a>      pow <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(xcrit, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">-</span></span>
<span id="cb39-249"><a href="#cb39-249" aria-hidden="true" tabindex="-1"></a>        <span class="fu">pnorm</span>(muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), muA, sigma <span class="sc">/</span><span class="fu">sqrt</span>(n))</span>
<span id="cb39-250"><a href="#cb39-250" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-251"><a href="#cb39-251" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-252"><a href="#cb39-252" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (alternative <span class="sc">==</span> <span class="st">"two.tailed"</span>) {</span>
<span id="cb39-253"><a href="#cb39-253" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb39-254"><a href="#cb39-254" aria-hidden="true" tabindex="-1"></a>      xcrit <span class="ot">=</span> mu0 <span class="sc">+</span> <span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> alpha<span class="sc">/</span><span class="dv">2</span>) <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)</span>
<span id="cb39-255"><a href="#cb39-255" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span></span>
<span id="cb39-256"><a href="#cb39-256" aria-hidden="true" tabindex="-1"></a>        g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_segment</span>(<span class="at">x =</span> xcrit, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> xcrit,</span>
<span id="cb39-257"><a href="#cb39-257" aria-hidden="true" tabindex="-1"></a>          <span class="at">yend =</span> <span class="fu">max</span>(</span>
<span id="cb39-258"><a href="#cb39-258" aria-hidden="true" tabindex="-1"></a>            <span class="fu">dnorm</span>(mu0, mu0, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>,</span>
<span id="cb39-259"><a href="#cb39-259" aria-hidden="true" tabindex="-1"></a>            <span class="fu">dnorm</span>(muA, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb39-260"><a href="#cb39-260" aria-hidden="true" tabindex="-1"></a>          ), <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="dv">3</span>)</span>
<span id="cb39-261"><a href="#cb39-261" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span></span>
<span id="cb39-262"><a href="#cb39-262" aria-hidden="true" tabindex="-1"></a>        g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_polygon</span>(</span>
<span id="cb39-263"><a href="#cb39-263" aria-hidden="true" tabindex="-1"></a>          <span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(</span>
<span id="cb39-264"><a href="#cb39-264" aria-hidden="true" tabindex="-1"></a>            <span class="at">x =</span> <span class="fu">c</span>(xcrit, <span class="fu">seq</span>(<span class="at">from =</span> xcrit,</span>
<span id="cb39-265"><a href="#cb39-265" aria-hidden="true" tabindex="-1"></a>              <span class="at">to =</span> muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), <span class="at">length.out =</span> <span class="dv">100</span>),</span>
<span id="cb39-266"><a href="#cb39-266" aria-hidden="true" tabindex="-1"></a>              muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)),</span>
<span id="cb39-267"><a href="#cb39-267" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">dnorm</span>(<span class="fu">seq</span>(<span class="at">from =</span> xcrit,</span>
<span id="cb39-268"><a href="#cb39-268" aria-hidden="true" tabindex="-1"></a>              <span class="at">to =</span> muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), <span class="at">length.out =</span> <span class="dv">100</span>),</span>
<span id="cb39-269"><a href="#cb39-269" aria-hidden="true" tabindex="-1"></a>              <span class="at">mean =</span> muA, <span class="at">sd =</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)), <span class="dv">0</span>)</span>
<span id="cb39-270"><a href="#cb39-270" aria-hidden="true" tabindex="-1"></a>          )),</span>
<span id="cb39-271"><a href="#cb39-271" aria-hidden="true" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y), <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb39-272"><a href="#cb39-272" aria-hidden="true" tabindex="-1"></a>      pow <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(muA <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), muA,</span>
<span id="cb39-273"><a href="#cb39-273" aria-hidden="true" tabindex="-1"></a>        sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">-</span> <span class="fu">pnorm</span>(xcrit, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n))</span>
<span id="cb39-274"><a href="#cb39-274" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-275"><a href="#cb39-275" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (z<span class="sc">&lt;</span><span class="dv">0</span>){</span>
<span id="cb39-276"><a href="#cb39-276" aria-hidden="true" tabindex="-1"></a>      xcrit <span class="ot">=</span> mu0 <span class="sc">-</span> <span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> alpha<span class="sc">/</span><span class="dv">2</span>) <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)</span>
<span id="cb39-277"><a href="#cb39-277" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span></span>
<span id="cb39-278"><a href="#cb39-278" aria-hidden="true" tabindex="-1"></a>        g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_segment</span>(<span class="at">x =</span> xcrit, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> xcrit,</span>
<span id="cb39-279"><a href="#cb39-279" aria-hidden="true" tabindex="-1"></a>          <span class="at">yend =</span> <span class="fu">max</span>(</span>
<span id="cb39-280"><a href="#cb39-280" aria-hidden="true" tabindex="-1"></a>            <span class="fu">dnorm</span>(mu0, mu0, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span>,</span>
<span id="cb39-281"><a href="#cb39-281" aria-hidden="true" tabindex="-1"></a>            <span class="fu">dnorm</span>(muA, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb39-282"><a href="#cb39-282" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb39-283"><a href="#cb39-283" aria-hidden="true" tabindex="-1"></a>          <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">linetype =</span> <span class="dv">3</span>)</span>
<span id="cb39-284"><a href="#cb39-284" aria-hidden="true" tabindex="-1"></a>      g <span class="ot">&lt;-</span></span>
<span id="cb39-285"><a href="#cb39-285" aria-hidden="true" tabindex="-1"></a>        g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">geom_polygon</span>(</span>
<span id="cb39-286"><a href="#cb39-286" aria-hidden="true" tabindex="-1"></a>          <span class="at">data =</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(</span>
<span id="cb39-287"><a href="#cb39-287" aria-hidden="true" tabindex="-1"></a>            <span class="at">x =</span> <span class="fu">c</span>(muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n),</span>
<span id="cb39-288"><a href="#cb39-288" aria-hidden="true" tabindex="-1"></a>              <span class="fu">seq</span>(<span class="at">from =</span> muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n),</span>
<span id="cb39-289"><a href="#cb39-289" aria-hidden="true" tabindex="-1"></a>                <span class="at">to =</span> xcrit, <span class="at">length.out =</span> <span class="dv">100</span>), xcrit),</span>
<span id="cb39-290"><a href="#cb39-290" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">dnorm</span>(</span>
<span id="cb39-291"><a href="#cb39-291" aria-hidden="true" tabindex="-1"></a>              <span class="fu">seq</span>(<span class="at">from =</span> muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n),</span>
<span id="cb39-292"><a href="#cb39-292" aria-hidden="true" tabindex="-1"></a>                <span class="at">to =</span> xcrit, <span class="at">length.out =</span> <span class="dv">100</span>),</span>
<span id="cb39-293"><a href="#cb39-293" aria-hidden="true" tabindex="-1"></a>                <span class="at">mean =</span> muA, <span class="at">sd =</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)), <span class="dv">0</span>))),</span>
<span id="cb39-294"><a href="#cb39-294" aria-hidden="true" tabindex="-1"></a>          ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y), <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb39-295"><a href="#cb39-295" aria-hidden="true" tabindex="-1"></a>      pow <span class="ot">&lt;-</span> <span class="fu">pnorm</span>(xcrit, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">-</span></span>
<span id="cb39-296"><a href="#cb39-296" aria-hidden="true" tabindex="-1"></a>        <span class="fu">pnorm</span>(muA <span class="sc">-</span> <span class="dv">4</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n), muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n))</span>
<span id="cb39-297"><a href="#cb39-297" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb39-298"><a href="#cb39-298" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb39-299"><a href="#cb39-299" aria-hidden="true" tabindex="-1"></a>  g <span class="ot">&lt;-</span></span>
<span id="cb39-300"><a href="#cb39-300" aria-hidden="true" tabindex="-1"></a>    g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">annotate</span>(</span>
<span id="cb39-301"><a href="#cb39-301" aria-hidden="true" tabindex="-1"></a>      <span class="st">"text"</span>,</span>
<span id="cb39-302"><a href="#cb39-302" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">max</span>(mu0, muA) <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n),</span>
<span id="cb39-303"><a href="#cb39-303" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="fu">max</span>(</span>
<span id="cb39-304"><a href="#cb39-304" aria-hidden="true" tabindex="-1"></a>        <span class="fu">dnorm</span>(mu0, mu0, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.075</span>,</span>
<span id="cb39-305"><a href="#cb39-305" aria-hidden="true" tabindex="-1"></a>        <span class="fu">dnorm</span>(muA, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.075</span></span>
<span id="cb39-306"><a href="#cb39-306" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb39-307"><a href="#cb39-307" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="fu">paste</span>(</span>
<span id="cb39-308"><a href="#cb39-308" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Effect Size = "</span>,</span>
<span id="cb39-309"><a href="#cb39-309" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>((muA <span class="sc">-</span> mu0) <span class="sc">/</span> sigma, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb39-310"><a href="#cb39-310" aria-hidden="true" tabindex="-1"></a>        <span class="st">"</span><span class="sc">\n</span><span class="st">Power = "</span>,</span>
<span id="cb39-311"><a href="#cb39-311" aria-hidden="true" tabindex="-1"></a>        <span class="fu">round</span>(pow, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb39-312"><a href="#cb39-312" aria-hidden="true" tabindex="-1"></a>        <span class="at">sep =</span> <span class="st">""</span></span>
<span id="cb39-313"><a href="#cb39-313" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb39-314"><a href="#cb39-314" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-315"><a href="#cb39-315" aria-hidden="true" tabindex="-1"></a>  g <span class="ot">&lt;-</span></span>
<span id="cb39-316"><a href="#cb39-316" aria-hidden="true" tabindex="-1"></a>    g <span class="sc">+</span> ggplot2<span class="sc">::</span><span class="fu">annotate</span>(</span>
<span id="cb39-317"><a href="#cb39-317" aria-hidden="true" tabindex="-1"></a>      <span class="st">"text"</span>,</span>
<span id="cb39-318"><a href="#cb39-318" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">min</span>(mu0, muA) <span class="sc">-</span> <span class="dv">2</span> <span class="sc">*</span> sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n),</span>
<span id="cb39-319"><a href="#cb39-319" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="fu">max</span>(</span>
<span id="cb39-320"><a href="#cb39-320" aria-hidden="true" tabindex="-1"></a>        <span class="fu">dnorm</span>(mu0, mu0, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.075</span>,</span>
<span id="cb39-321"><a href="#cb39-321" aria-hidden="true" tabindex="-1"></a>        <span class="fu">dnorm</span>(muA, muA, sigma <span class="sc">/</span> <span class="fu">sqrt</span>(n)) <span class="sc">+</span> <span class="fl">0.075</span></span>
<span id="cb39-322"><a href="#cb39-322" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb39-323"><a href="#cb39-323" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="st">"Red = mu0</span><span class="sc">\n</span><span class="st">Blue = muA"</span></span>
<span id="cb39-324"><a href="#cb39-324" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb39-325"><a href="#cb39-325" aria-hidden="true" tabindex="-1"></a>  g</span>
<span id="cb39-326"><a href="#cb39-326" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-327"><a href="#cb39-327" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-328"><a href="#cb39-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-329"><a href="#cb39-329" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** We can either create separate ***R*** script files (".R" files) for each function we want to include in our package **or** we can include multiple functions in each of one or more files. If we do the latter, we just need to include function documentation comments (described below) before each function.</span></span>
<span id="cb39-330"><a href="#cb39-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-331"><a href="#cb39-331" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Important Caveats about Package Code {.unnumbered}</span></span>
<span id="cb39-332"><a href="#cb39-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-333"><a href="#cb39-333" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Do not include "top level" code...</span>
<span id="cb39-334"><a href="#cb39-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-335"><a href="#cb39-335" aria-hidden="true" tabindex="-1"></a>Top level code (e.g., code outside of a function) is only run at build time, which can create problems if the code in your package functions utilizes or "depends upon" a function from another package. For example, if you want to create a function that creates a special kind of formating for a {ggplot2} plot object, and your function calls <span class="in">`ggplot()`</span>, that is an example of a "dependency". But, you should NOT include <span class="in">`library(ggplot2)`</span> as top-level code in your package, because it will give you a problem at run time if {ggplot2} is not already loaded. Rather, you should describe all of the packages your code needs to run in the <span class="in">`DESCRIPTION`</span> file (see Step <span class="co">[</span><span class="ot">5</span><span class="co">]</span> below).</span>
<span id="cb39-336"><a href="#cb39-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-337"><a href="#cb39-337" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Be cautious about including in your package functions code that messes with the ***R*** environment. In general...</span>
<span id="cb39-338"><a href="#cb39-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-339"><a href="#cb39-339" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Do not use <span class="in">`library()`</span> or <span class="in">`require()`</span></span>
<span id="cb39-340"><a href="#cb39-340" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Do not use <span class="in">`source()`</span></span>
<span id="cb39-341"><a href="#cb39-341" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Do not modify a global option using <span class="in">`options()`</span> unless you store the original setting(s) and then reset them <span class="in">`on.exit()`</span> from your package function</span>
<span id="cb39-342"><a href="#cb39-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-343"><a href="#cb39-343" aria-hidden="true" tabindex="-1"></a>**EXAMPLE:**</span>
<span id="cb39-344"><a href="#cb39-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-347"><a href="#cb39-347" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-348"><a href="#cb39-348" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-349"><a href="#cb39-349" aria-hidden="true" tabindex="-1"></a><span class="co"># within your function, you could include the following...</span></span>
<span id="cb39-350"><a href="#cb39-350" aria-hidden="true" tabindex="-1"></a><span class="co"># save the default value for number of significant digits to print</span></span>
<span id="cb39-351"><a href="#cb39-351" aria-hidden="true" tabindex="-1"></a>original <span class="ot">&lt;-</span> <span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">7</span>)</span>
<span id="cb39-352"><a href="#cb39-352" aria-hidden="true" tabindex="-1"></a><span class="co"># change that global option</span></span>
<span id="cb39-353"><a href="#cb39-353" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb39-354"><a href="#cb39-354" aria-hidden="true" tabindex="-1"></a><span class="co"># change the global option back on exit</span></span>
<span id="cb39-355"><a href="#cb39-355" aria-hidden="true" tabindex="-1"></a><span class="fu">on.exit</span>(<span class="fu">options</span>(original), <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-356"><a href="#cb39-356" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-357"><a href="#cb39-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-358"><a href="#cb39-358" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Do not modify the working directory, e.g., with <span class="in">`setwd()`</span>, unless you set it back <span class="in">`on.exit()`</span> from your package function</span>
<span id="cb39-359"><a href="#cb39-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-360"><a href="#cb39-360" aria-hidden="true" tabindex="-1"></a>**EXAMPLE:**</span>
<span id="cb39-361"><a href="#cb39-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-364"><a href="#cb39-364" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-365"><a href="#cb39-365" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-366"><a href="#cb39-366" aria-hidden="true" tabindex="-1"></a><span class="co"># in your function, you could include the following...</span></span>
<span id="cb39-367"><a href="#cb39-367" aria-hidden="true" tabindex="-1"></a><span class="co"># save the default value for working directory</span></span>
<span id="cb39-368"><a href="#cb39-368" aria-hidden="true" tabindex="-1"></a>original <span class="ot">&lt;-</span> <span class="fu">setwd</span>(<span class="fu">tempdir</span>())</span>
<span id="cb39-369"><a href="#cb39-369" aria-hidden="true" tabindex="-1"></a><span class="co"># change that global option</span></span>
<span id="cb39-370"><a href="#cb39-370" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Desktop"</span>)</span>
<span id="cb39-371"><a href="#cb39-371" aria-hidden="true" tabindex="-1"></a><span class="co"># change the global option back on exit</span></span>
<span id="cb39-372"><a href="#cb39-372" aria-hidden="true" tabindex="-1"></a><span class="fu">on.exit</span>(<span class="fu">setwd</span>(original), <span class="at">add=</span><span class="cn">TRUE</span>)</span>
<span id="cb39-373"><a href="#cb39-373" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-374"><a href="#cb39-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-375"><a href="#cb39-375" aria-hidden="true" tabindex="-1"></a><span class="fu">### Add Function Documentation {.unnumbered}</span></span>
<span id="cb39-376"><a href="#cb39-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-377"><a href="#cb39-377" aria-hidden="true" tabindex="-1"></a>We next add documentation to our ***R*** script containing the <span class="in">`power.plot()`</span> function by adding special structured comments to the begining of the ".R" file. These comments begin with <span class="in">`#'`</span> and then include certain parameter tags, marked with <span class="in">`@`</span>. These comments will be read and compiled into the correct format for showing in the help/documentation files for our package when we build the package using {devtools} and {roxygen2}. Details for common parameter tags can be found in online {roxygen2} documentation, e.g., <span class="co">[</span><span class="ot">here</span><span class="co">](https://rstats-pkgs.readthedocs.io/en/latest/roxygen2.html#common-roxygen2-tags)</span> or <span class="co">[</span><span class="ot">here</span><span class="co">](https://bookdown.org/rdpeng/RProgDA/documentation.html#common-roxygen2-tags)</span>.</span>
<span id="cb39-378"><a href="#cb39-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-379"><a href="#cb39-379" aria-hidden="true" tabindex="-1"></a>Minimally, we want to add the following tags to our file.</span>
<span id="cb39-380"><a href="#cb39-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-381"><a href="#cb39-381" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`@title`</span></span>
<span id="cb39-382"><a href="#cb39-382" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`@description`</span></span>
<span id="cb39-383"><a href="#cb39-383" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`@param`</span> - one line for each parameter in our function</span>
<span id="cb39-384"><a href="#cb39-384" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`@keywords`</span> - to aid in searching functions</span>
<span id="cb39-385"><a href="#cb39-385" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`@export`</span> - makes the function available for others to use when your package is loaded</span>
<span id="cb39-386"><a href="#cb39-386" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`@examples`</span> - sample code</span>
<span id="cb39-387"><a href="#cb39-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-388"><a href="#cb39-388" aria-hidden="true" tabindex="-1"></a>For my file, I added the text below just before the <span class="in">`power.plot()`</span> function.</span>
<span id="cb39-389"><a href="#cb39-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-390"><a href="#cb39-390" aria-hidden="true" tabindex="-1"></a>  #' @title An interactive power plotting function</span>
<span id="cb39-391"><a href="#cb39-391" aria-hidden="true" tabindex="-1"></a>  #' @description This function allows you explore the relationship between sample size, alpha level, mean, standard deviation, and power</span>
<span id="cb39-392"><a href="#cb39-392" aria-hidden="true" tabindex="-1"></a>  #' @param sigma standard deviation</span>
<span id="cb39-393"><a href="#cb39-393" aria-hidden="true" tabindex="-1"></a>  #' @param mu0 mean value under the null hypothesis</span>
<span id="cb39-394"><a href="#cb39-394" aria-hidden="true" tabindex="-1"></a>  #' @param muA mean value under the alternative hypothesis</span>
<span id="cb39-395"><a href="#cb39-395" aria-hidden="true" tabindex="-1"></a>  #' @param n sample size</span>
<span id="cb39-396"><a href="#cb39-396" aria-hidden="true" tabindex="-1"></a>  #' @param alpha alpha level</span>
<span id="cb39-397"><a href="#cb39-397" aria-hidden="true" tabindex="-1"></a>  #' @param alternative type of test to run, defaults to "two-tailed"</span>
<span id="cb39-398"><a href="#cb39-398" aria-hidden="true" tabindex="-1"></a>  #' @keywords power</span>
<span id="cb39-399"><a href="#cb39-399" aria-hidden="true" tabindex="-1"></a>  #' @export</span>
<span id="cb39-400"><a href="#cb39-400" aria-hidden="true" tabindex="-1"></a>  #' @examples</span>
<span id="cb39-401"><a href="#cb39-401" aria-hidden="true" tabindex="-1"></a>  #' power.plot(sigma=0.5, mu0=1, muA=1, n=25, alpha=0.05, alternative="two.tailed")</span>
<span id="cb39-402"><a href="#cb39-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-403"><a href="#cb39-403" aria-hidden="true" tabindex="-1"></a><span class="fu">### Add Dependencies {.unnumbered}</span></span>
<span id="cb39-404"><a href="#cb39-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-405"><a href="#cb39-405" aria-hidden="true" tabindex="-1"></a>Because I know that the function I just created uses functions from {ggplot2}, I want to add a reference to that package as a dependency to my DESCRIPTION file. To do this, I can run the following at the command line where I am developing my package:</span>
<span id="cb39-406"><a href="#cb39-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-409"><a href="#cb39-409" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-410"><a href="#cb39-410" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-411"><a href="#cb39-411" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb39-412"><a href="#cb39-412" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-413"><a href="#cb39-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-414"><a href="#cb39-414" aria-hidden="true" tabindex="-1"></a>This function adds the following lines to the DESCRIPTION file:</span>
<span id="cb39-415"><a href="#cb39-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-416"><a href="#cb39-416" aria-hidden="true" tabindex="-1"></a>  Imports:</span>
<span id="cb39-417"><a href="#cb39-417" aria-hidden="true" tabindex="-1"></a>    ggplot2</span>
<span id="cb39-418"><a href="#cb39-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-419"><a href="#cb39-419" aria-hidden="true" tabindex="-1"></a>Also, because I tend to use this function inside of a function from {manipulate} (see <span class="co">[</span><span class="ot">**Module 17**</span><span class="co">](#module-17)</span>), I also run the following...</span>
<span id="cb39-420"><a href="#cb39-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-423"><a href="#cb39-423" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-424"><a href="#cb39-424" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-425"><a href="#cb39-425" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"manipulate"</span>, <span class="st">"Suggests"</span>)</span>
<span id="cb39-426"><a href="#cb39-426" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-427"><a href="#cb39-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-428"><a href="#cb39-428" aria-hidden="true" tabindex="-1"></a>... to add a "Suggests" block to the DESCRIPTION file:</span>
<span id="cb39-429"><a href="#cb39-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-430"><a href="#cb39-430" aria-hidden="true" tabindex="-1"></a>  Suggests: </span>
<span id="cb39-431"><a href="#cb39-431" aria-hidden="true" tabindex="-1"></a>    manipulate</span>
<span id="cb39-432"><a href="#cb39-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-433"><a href="#cb39-433" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** You should open the DESCRIPTION file with the ***RStudio*** text editor to confirm that these "Imports" and "Suggests" statements have been added.</span></span>
<span id="cb39-434"><a href="#cb39-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-435"><a href="#cb39-435" aria-hidden="true" tabindex="-1"></a><span class="fu">### Create Documentation Files {.unnumbered}</span></span>
<span id="cb39-436"><a href="#cb39-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-437"><a href="#cb39-437" aria-hidden="true" tabindex="-1"></a>Next, we create an ".R" script file that includes {roxygen2} comments that will produce documentation about the package itself, and we place that file in the <span class="in">`R`</span> subdirectory with all of our other ".R" files. The <span class="in">`use_package_doc()`</span> function from {usethis} will create a template for this file for us, with the default name of "*package name*-package.R"</span>
<span id="cb39-438"><a href="#cb39-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-441"><a href="#cb39-441" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-442"><a href="#cb39-442" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-443"><a href="#cb39-443" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package_doc</span>()</span>
<span id="cb39-444"><a href="#cb39-444" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-445"><a href="#cb39-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-446"><a href="#cb39-446" aria-hidden="true" tabindex="-1"></a><span class="fu">### Process Documentation Files {.unnumbered}</span></span>
<span id="cb39-447"><a href="#cb39-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-448"><a href="#cb39-448" aria-hidden="true" tabindex="-1"></a>To now automatically create help/documentation files for our packages and the functions it contain from the comment annotations we included in the ".R" files in the <span class="in">`R`</span> directory, we run the <span class="in">`document()`</span> function from {devtools}.</span>
<span id="cb39-449"><a href="#cb39-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-452"><a href="#cb39-452" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-453"><a href="#cb39-453" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-454"><a href="#cb39-454" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()</span>
<span id="cb39-455"><a href="#cb39-455" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-456"><a href="#cb39-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-457"><a href="#cb39-457" aria-hidden="true" tabindex="-1"></a>This function automatically creates one or more ".Rd" (**RDocument**) files and places them in the <span class="in">`man`</span> (i.e., "manual") directory, creating that directory if it does not already exist. It also adds a NAMESPACE file to the main package directory, if that does not already exist, or rewrites that file if it does.</span>
<span id="cb39-458"><a href="#cb39-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-459"><a href="#cb39-459" aria-hidden="true" tabindex="-1"></a><span class="fu">### Build the Package {.unnumbered}</span></span>
<span id="cb39-460"><a href="#cb39-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-461"><a href="#cb39-461" aria-hidden="true" tabindex="-1"></a>The next thing we do is to bundle up all of the elements in our package directory into a single file and create a compressed version of that file. We do this by runnning the <span class="in">`build()`</span> function from {devtools}. If we are in the package directory itself, then we do not need to specify an argument to <span class="in">`build()`</span>, but we can provide <span class="in">`build()`</span> with a path to the package directory if needed.</span>
<span id="cb39-462"><a href="#cb39-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-465"><a href="#cb39-465" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-466"><a href="#cb39-466" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-467"><a href="#cb39-467" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>() <span class="co"># or</span></span>
<span id="cb39-468"><a href="#cb39-468" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>(<span class="st">"~/Development/Repos/powerplot"</span>)</span>
<span id="cb39-469"><a href="#cb39-469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-470"><a href="#cb39-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-471"><a href="#cb39-471" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** When we run </span><span class="in">`build()`</span><span class="at">, we might get the message "Warning: invalid uid value replaced by that for user 'nobody'". You can safely ignore that warning.</span></span>
<span id="cb39-472"><a href="#cb39-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-473"><a href="#cb39-473" aria-hidden="true" tabindex="-1"></a>Running <span class="in">`build()`</span> creates a ".tar.gz" file for your package in the parent directory of your package directory. This file is basically a compressed (".gz") version of a bundled (".tar") file that contains all of the important components of your ***R*** package... the function files in the <span class="in">`R`</span> folder, the DESCRIPTION and NAMESPACE files, and the <span class="in">`man`</span> folder containining RDocument document files (".Rd") for your package's functions.</span>
<span id="cb39-474"><a href="#cb39-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-475"><a href="#cb39-475" aria-hidden="true" tabindex="-1"></a><span class="fu">### Install and Load the Package {.unnumbered}</span></span>
<span id="cb39-476"><a href="#cb39-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-477"><a href="#cb39-477" aria-hidden="true" tabindex="-1"></a>We can now install this package into our working environment and check out our new documentation. The {devtools} function <span class="in">`load_all()`</span>, executed from inside the package directory, will load your package into memory.</span>
<span id="cb39-478"><a href="#cb39-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-479"><a href="#cb39-479" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** With this command, your package will not be installed into your system or user library and will disappear when you restart ***R***. This also will not load any vignettes you have created (see below).</span></span>
<span id="cb39-480"><a href="#cb39-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-483"><a href="#cb39-483" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-484"><a href="#cb39-484" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-485"><a href="#cb39-485" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>()</span>
<span id="cb39-486"><a href="#cb39-486" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-487"><a href="#cb39-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-488"><a href="#cb39-488" aria-hidden="true" tabindex="-1"></a>Now try out your new function! First, use <span class="in">`library(powerplot)`</span> to load in your library. Then, here is what you should see in the "Help" tab when you type "?power.plot" at console line.</span>
<span id="cb39-489"><a href="#cb39-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-492"><a href="#cb39-492" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-493"><a href="#cb39-493" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb39-494"><a href="#cb39-494" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "70%"</span></span>
<span id="cb39-495"><a href="#cb39-495" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"img/power.plot-help.png"</span>)</span>
<span id="cb39-496"><a href="#cb39-496" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-497"><a href="#cb39-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-498"><a href="#cb39-498" aria-hidden="true" tabindex="-1"></a>You can also install your package to your system or user library by using the {devtools} function <span class="in">`install()`</span>. Here, I am installing to my user library.</span>
<span id="cb39-499"><a href="#cb39-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-502"><a href="#cb39-502" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-503"><a href="#cb39-503" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-504"><a href="#cb39-504" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install</span>()</span>
<span id="cb39-505"><a href="#cb39-505" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb39-506"><a href="#cb39-506" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(withr)</span>
<span id="cb39-507"><a href="#cb39-507" aria-hidden="true" tabindex="-1"></a><span class="fu">with_libpaths</span>(</span>
<span id="cb39-508"><a href="#cb39-508" aria-hidden="true" tabindex="-1"></a>  <span class="st">"/Users/ad26693/Library/R/arm64/4.3/library"</span>,</span>
<span id="cb39-509"><a href="#cb39-509" aria-hidden="true" tabindex="-1"></a>  <span class="at">code =</span> devtools<span class="sc">::</span><span class="fu">install</span>()</span>
<span id="cb39-510"><a href="#cb39-510" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-511"><a href="#cb39-511" aria-hidden="true" tabindex="-1"></a><span class="co"># the code about puts my new {powerplot} package into my user library by default... if I wanted to install it to my system library, I could provide the path to that location instead</span></span>
<span id="cb39-512"><a href="#cb39-512" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>withr)</span>
<span id="cb39-513"><a href="#cb39-513" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-514"><a href="#cb39-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-515"><a href="#cb39-515" aria-hidden="true" tabindex="-1"></a>You can also use the {base} function <span class="in">`install.packages()`</span> function with the path to the ".tar.gz" file you created with <span class="in">`build()`</span> as an argument. Here, we use <span class="in">`repos=NULL`</span> because we are installing from a local file and we set <span class="in">`type=source`</span> as we're installing a bundled, compressed source file. In the code below, I have set <span class="in">`lib=`</span> to be the location of my system library, but you can instead use a user library (as we did above).</span>
<span id="cb39-516"><a href="#cb39-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-517"><a href="#cb39-517" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** You may need to change the path depending on your operating system (the path below is a common one for MacOS users) and on where your system library is located. You may also need to have administrator privileges to successfully install to that location.</span></span>
<span id="cb39-518"><a href="#cb39-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-521"><a href="#cb39-521" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-522"><a href="#cb39-522" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-523"><a href="#cb39-523" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Development/Repos/powerplot_0.0.1.0.tar.gz"</span>,</span>
<span id="cb39-524"><a href="#cb39-524" aria-hidden="true" tabindex="-1"></a>  <span class="at">repos =</span> <span class="cn">NULL</span>, <span class="at">type =</span> <span class="st">"source"</span>,</span>
<span id="cb39-525"><a href="#cb39-525" aria-hidden="true" tabindex="-1"></a>  <span class="at">lib =</span> <span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>)</span>
<span id="cb39-526"><a href="#cb39-526" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-527"><a href="#cb39-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-528"><a href="#cb39-528" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** You may occasionally need to restart ***R*** after installing (or removing) a package in order to be able to access it. If, after installing your package and running `library()`, you cannot visualize the documentaton in the **Help** tab, try restarting ***R*** with the following command: </span><span class="in">`.rs.restartR()`</span></span>
<span id="cb39-529"><a href="#cb39-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-530"><a href="#cb39-530" aria-hidden="true" tabindex="-1"></a><span class="fu">### Check the Package for Errors {.unnumbered}</span></span>
<span id="cb39-531"><a href="#cb39-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-532"><a href="#cb39-532" aria-hidden="true" tabindex="-1"></a>It is always a good idea to run certain tests on your package to make sure that it is constructed correctly before distributing it to others to install, either as a built file or via the Comprehensive R Archive Network (CRAN). The terminal function <span class="in">`R CMD check`</span> is one way to run a series of automated checks. To do this, open a terminal window and navigate to the directory containing the ".tar.gz" file (which should be the parent directory for your ***R*** package), and then run:</span>
<span id="cb39-533"><a href="#cb39-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-534"><a href="#cb39-534" aria-hidden="true" tabindex="-1"></a>  R CMD check powerplot_0.0.1.0.tar.gz</span>
<span id="cb39-535"><a href="#cb39-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-536"><a href="#cb39-536" aria-hidden="true" tabindex="-1"></a>This can also be done from ***R*** using {devtools} from inside the package directory.</span>
<span id="cb39-537"><a href="#cb39-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-540"><a href="#cb39-540" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-541"><a href="#cb39-541" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-542"><a href="#cb39-542" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span>
<span id="cb39-543"><a href="#cb39-543" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-544"><a href="#cb39-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-545"><a href="#cb39-545" aria-hidden="true" tabindex="-1"></a>**EXAMPLE:** Using the Package you Just Created</span>
<span id="cb39-546"><a href="#cb39-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-549"><a href="#cb39-549" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-550"><a href="#cb39-550" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-551"><a href="#cb39-551" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(manipulate)</span>
<span id="cb39-552"><a href="#cb39-552" aria-hidden="true" tabindex="-1"></a><span class="fu">manipulate</span>(</span>
<span id="cb39-553"><a href="#cb39-553" aria-hidden="true" tabindex="-1"></a>  <span class="fu">power.plot</span>(sigma, muA, mu0, n, alpha, alternative),</span>
<span id="cb39-554"><a href="#cb39-554" aria-hidden="true" tabindex="-1"></a>  <span class="at">sigma =</span> <span class="fu">slider</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="at">step =</span> <span class="fl">0.1</span>, <span class="at">initial =</span> <span class="dv">2</span>),</span>
<span id="cb39-555"><a href="#cb39-555" aria-hidden="true" tabindex="-1"></a>  <span class="at">muA =</span> <span class="fu">slider</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="at">step =</span> <span class="fl">0.1</span>, <span class="at">initial =</span> <span class="dv">2</span>),</span>
<span id="cb39-556"><a href="#cb39-556" aria-hidden="true" tabindex="-1"></a>  <span class="at">mu0 =</span> <span class="fu">slider</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="at">step =</span> <span class="fl">0.1</span>, <span class="at">initial =</span> <span class="dv">0</span>),</span>
<span id="cb39-557"><a href="#cb39-557" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="fu">slider</span>(<span class="dv">1</span>, <span class="dv">50</span>, <span class="at">step =</span> <span class="dv">1</span>, <span class="at">initial =</span> <span class="dv">16</span>),</span>
<span id="cb39-558"><a href="#cb39-558" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> <span class="fu">slider</span>(<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="at">step =</span> <span class="fl">0.01</span>, <span class="at">initial =</span> <span class="fl">0.05</span>),</span>
<span id="cb39-559"><a href="#cb39-559" aria-hidden="true" tabindex="-1"></a>  <span class="at">alternative =</span> <span class="fu">picker</span>(<span class="st">"two.tailed"</span>,<span class="st">"greater"</span>,<span class="st">"less"</span>))</span>
<span id="cb39-560"><a href="#cb39-560" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>manipulate)</span>
<span id="cb39-561"><a href="#cb39-561" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-562"><a href="#cb39-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-563"><a href="#cb39-563" aria-hidden="true" tabindex="-1"></a><span class="fu">## Writing a Vignette {.unnumbered}</span></span>
<span id="cb39-564"><a href="#cb39-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-565"><a href="#cb39-565" aria-hidden="true" tabindex="-1"></a>To include an **R Markdown** document as a vignette in your ***R*** package, all you need to do is:</span>
<span id="cb39-566"><a href="#cb39-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-567"><a href="#cb39-567" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Create a <span class="in">`vignettes`</span> subdirectory within the package directory.</span>
<span id="cb39-568"><a href="#cb39-568" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Put your vignette ".Rmd" file in that directory.</span>
<span id="cb39-569"><a href="#cb39-569" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Within the YAML header at the top of the ".Rmd" file, include code like the following:</span>
<span id="cb39-570"><a href="#cb39-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-571"><a href="#cb39-571" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- --&gt;</span></span>
<span id="cb39-572"><a href="#cb39-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-573"><a href="#cb39-573" aria-hidden="true" tabindex="-1"></a><span class="in">    ---</span></span>
<span id="cb39-574"><a href="#cb39-574" aria-hidden="true" tabindex="-1"></a><span class="in">    title: "Put the title of your vignette here"</span></span>
<span id="cb39-575"><a href="#cb39-575" aria-hidden="true" tabindex="-1"></a><span class="in">    output: rmarkdown::html_vignette</span></span>
<span id="cb39-576"><a href="#cb39-576" aria-hidden="true" tabindex="-1"></a><span class="in">    vignette: &gt;</span></span>
<span id="cb39-577"><a href="#cb39-577" aria-hidden="true" tabindex="-1"></a><span class="in">      %\VignetteIndexEntry{Put the title of your vignette here}</span></span>
<span id="cb39-578"><a href="#cb39-578" aria-hidden="true" tabindex="-1"></a><span class="in">      %\VignetteEngine{knitr::rmarkdown}</span></span>
<span id="cb39-579"><a href="#cb39-579" aria-hidden="true" tabindex="-1"></a><span class="in">      \usepackage[utf8]{inputenc}</span></span>
<span id="cb39-580"><a href="#cb39-580" aria-hidden="true" tabindex="-1"></a><span class="in">    ---</span></span>
<span id="cb39-581"><a href="#cb39-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-582"><a href="#cb39-582" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>And add the following lines to your package's DESCRIPTION file:</span>
<span id="cb39-583"><a href="#cb39-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-584"><a href="#cb39-584" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- --&gt;</span></span>
<span id="cb39-585"><a href="#cb39-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-586"><a href="#cb39-586" aria-hidden="true" tabindex="-1"></a><span class="in">    Suggests: knitr, rmarkdown</span></span>
<span id="cb39-587"><a href="#cb39-587" aria-hidden="true" tabindex="-1"></a><span class="in">    VignetteBuilder: knitr</span></span>
<span id="cb39-588"><a href="#cb39-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-589"><a href="#cb39-589" aria-hidden="true" tabindex="-1"></a>The command <span class="in">`use_vignette()`</span> from {usethis} will do all of this for us and give us a template ".Rmd" file we can edit for our vignette...</span>
<span id="cb39-590"><a href="#cb39-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-593"><a href="#cb39-593" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-594"><a href="#cb39-594" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-595"><a href="#cb39-595" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_vignette</span>(<span class="st">"powerplot"</span>, <span class="at">title=</span><span class="st">"Power Plot Vignette"</span>)</span>
<span id="cb39-596"><a href="#cb39-596" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-597"><a href="#cb39-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-598"><a href="#cb39-598" aria-hidden="true" tabindex="-1"></a>Once you have your ".Rmd" file completed, can build (i.e., "knit") your vignette using...</span>
<span id="cb39-599"><a href="#cb39-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-602"><a href="#cb39-602" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-603"><a href="#cb39-603" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-604"><a href="#cb39-604" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build_vignettes</span>()</span>
<span id="cb39-605"><a href="#cb39-605" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-606"><a href="#cb39-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-607"><a href="#cb39-607" aria-hidden="true" tabindex="-1"></a>The resulting rendered ".html" version of your vignette will be placed into the <span class="in">`inst/doc`</span> folder inside the package directory.</span>
<span id="cb39-608"><a href="#cb39-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-609"><a href="#cb39-609" aria-hidden="true" tabindex="-1"></a>After creating your vignette, you should run <span class="in">`build()`</span> again to bundle the vignette into your ".tar.gz" package file.</span>
<span id="cb39-610"><a href="#cb39-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-613"><a href="#cb39-613" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-614"><a href="#cb39-614" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-615"><a href="#cb39-615" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>()</span>
<span id="cb39-616"><a href="#cb39-616" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-617"><a href="#cb39-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-618"><a href="#cb39-618" aria-hidden="true" tabindex="-1"></a>Alternatively, you can run <span class="in">`R CMD build`</span> from a terminal prompt from inside the package directory to build a ".tar.gz" file that contains the ".html" version of the vignette.</span>
<span id="cb39-619"><a href="#cb39-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-620"><a href="#cb39-620" aria-hidden="true" tabindex="-1"></a>Then, you can run <span class="in">`install()`</span> (or <span class="in">`install_packages()`</span>), <span class="in">`and library()`</span> again to pull the new package with vignette into ***R***.</span>
<span id="cb39-621"><a href="#cb39-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-622"><a href="#cb39-622" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE:** If you use </span><span class="in">`install()`</span><span class="at">, be sure to include the argument "build_vignettes=TRUE" to ensure that the vignette is bundled with your package and installed.</span></span>
<span id="cb39-623"><a href="#cb39-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-626"><a href="#cb39-626" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-627"><a href="#cb39-627" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-628"><a href="#cb39-628" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install</span>(<span class="at">build_vignettes =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-629"><a href="#cb39-629" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb39-630"><a href="#cb39-630" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(withr)</span>
<span id="cb39-631"><a href="#cb39-631" aria-hidden="true" tabindex="-1"></a><span class="fu">with_libpaths</span>(</span>
<span id="cb39-632"><a href="#cb39-632" aria-hidden="true" tabindex="-1"></a>  <span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>,</span>
<span id="cb39-633"><a href="#cb39-633" aria-hidden="true" tabindex="-1"></a>  <span class="at">code =</span> devtools<span class="sc">::</span><span class="fu">install</span>(<span class="at">build_vignettes =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-634"><a href="#cb39-634" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb39-635"><a href="#cb39-635" aria-hidden="true" tabindex="-1"></a><span class="co"># again, this puts powerplot in my system library instead of my user library...</span></span>
<span id="cb39-636"><a href="#cb39-636" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(package<span class="sc">:</span>withr)</span>
<span id="cb39-637"><a href="#cb39-637" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb39-638"><a href="#cb39-638" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Development/Repos/powerplot_0.0.1.0.tar.gz"</span>,</span>
<span id="cb39-639"><a href="#cb39-639" aria-hidden="true" tabindex="-1"></a>  <span class="at">repos =</span> <span class="cn">NULL</span>, <span class="at">type =</span> <span class="st">"source"</span>,</span>
<span id="cb39-640"><a href="#cb39-640" aria-hidden="true" tabindex="-1"></a>  <span class="at">lib =</span> <span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>)</span>
<span id="cb39-641"><a href="#cb39-641" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(powerplot)</span>
<span id="cb39-642"><a href="#cb39-642" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-643"><a href="#cb39-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-644"><a href="#cb39-644" aria-hidden="true" tabindex="-1"></a>Check that your package now appears in the **Packages** tab and that clicking on its link takes you to the package documentation page with a hyperlink for "User guides, package vignettes, and other documentation". If the package does not show up there, you may need to restart ***R*** (using <span class="in">`.rs.restartR()`</span>).</span>
<span id="cb39-645"><a href="#cb39-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-646"><a href="#cb39-646" aria-hidden="true" tabindex="-1"></a><span class="fu">## Including a Custom Dataset {.unnumbered}</span></span>
<span id="cb39-647"><a href="#cb39-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-648"><a href="#cb39-648" aria-hidden="true" tabindex="-1"></a>It is often useful to include example datasets in your ***R package*** to use in examples or vignettes or to illustrate a data format.</span>
<span id="cb39-649"><a href="#cb39-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-650"><a href="#cb39-650" aria-hidden="true" tabindex="-1"></a>To include a dataset in your package, you would create a <span class="in">`data`</span> subdirectory inside of the package directory and place your dataset there, in ".RData" format (using the extension ".RData" or ".rda").</span>
<span id="cb39-651"><a href="#cb39-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-652"><a href="#cb39-652" aria-hidden="true" tabindex="-1"></a>You can use the <span class="in">`use_data()`</span> function from {use_this} to create the data directory and populate it with data from a dataframe.</span>
<span id="cb39-653"><a href="#cb39-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-656"><a href="#cb39-656" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-657"><a href="#cb39-657" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-658"><a href="#cb39-658" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb39-659"><a href="#cb39-659" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-2024-datasets/main/zombies.csv"</span></span>
<span id="cb39-660"><a href="#cb39-660" aria-hidden="true" tabindex="-1"></a>zombies <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-661"><a href="#cb39-661" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_data</span>(zombies, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-662"><a href="#cb39-662" aria-hidden="true" tabindex="-1"></a><span class="co"># overwrite argument replaces the data if it already exists</span></span>
<span id="cb39-663"><a href="#cb39-663" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-664"><a href="#cb39-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-665"><a href="#cb39-665" aria-hidden="true" tabindex="-1"></a>You can also use the <span class="in">`save()`</span> function to create such files as follows:</span>
<span id="cb39-666"><a href="#cb39-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-667"><a href="#cb39-667" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb39-668"><a href="#cb39-668" aria-hidden="true" tabindex="-1"></a><span class="in">save(zombies, file="data/zombies.RData")</span></span>
<span id="cb39-669"><a href="#cb39-669" aria-hidden="true" tabindex="-1"></a><span class="in"># OR</span></span>
<span id="cb39-670"><a href="#cb39-670" aria-hidden="true" tabindex="-1"></a><span class="in">save(zombies, file="data/zombies.rda")</span></span>
<span id="cb39-671"><a href="#cb39-671" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-672"><a href="#cb39-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-673"><a href="#cb39-673" aria-hidden="true" tabindex="-1"></a>Then, run <span class="in">`document()`</span> and <span class="in">`build()`</span>again as above to create the package anew with the data included in it, and run <span class="in">`install()`</span> and <span class="in">`library()`</span> to load it into your workspace. Voíla!</span>
<span id="cb39-674"><a href="#cb39-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-675"><a href="#cb39-675" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sharing Your Package {.unnumbered}</span></span>
<span id="cb39-676"><a href="#cb39-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-677"><a href="#cb39-677" aria-hidden="true" tabindex="-1"></a>To share your package with another user, simply pass them the ".tar.gz" file and let them run <span class="in">`install_packages()`</span> with the argument "type=source".</span>
<span id="cb39-678"><a href="#cb39-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-681"><a href="#cb39-681" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-682"><a href="#cb39-682" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-683"><a href="#cb39-683" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Development/Repos/powerplot_0.0.1.0.tar.gz"</span>,</span>
<span id="cb39-684"><a href="#cb39-684" aria-hidden="true" tabindex="-1"></a>  <span class="at">repos =</span> <span class="cn">NULL</span>, <span class="at">type =</span> <span class="st">"source"</span>,</span>
<span id="cb39-685"><a href="#cb39-685" aria-hidden="true" tabindex="-1"></a>  <span class="at">lib =</span> <span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>)</span>
<span id="cb39-686"><a href="#cb39-686" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-687"><a href="#cb39-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-688"><a href="#cb39-688" aria-hidden="true" tabindex="-1"></a><span class="fu">## An Example with Vignette and Data {.unnumbered}</span></span>
<span id="cb39-689"><a href="#cb39-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-690"><a href="#cb39-690" aria-hidden="true" tabindex="-1"></a>For your group project, you may find that you do not need to write your own custom functions, but you will still need to create a vignette and a dataset to distribute. Here, I demonstrate creating such a package based on <span class="co">[</span><span class="ot">**Module 21**</span><span class="co">](#module-21)</span> on multiple regression and ANCOVA.</span>
<span id="cb39-691"><a href="#cb39-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-692"><a href="#cb39-692" aria-hidden="true" tabindex="-1"></a><span class="fu">### Create the Package Directory {.unnumbered}</span></span>
<span id="cb39-693"><a href="#cb39-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-696"><a href="#cb39-696" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-697"><a href="#cb39-697" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-698"><a href="#cb39-698" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_package</span>(<span class="st">"~/Development/Repos/multireg"</span>)</span>
<span id="cb39-699"><a href="#cb39-699" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-700"><a href="#cb39-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-701"><a href="#cb39-701" aria-hidden="true" tabindex="-1"></a>This should open a new ***RStudio*** session... then, in that session...</span>
<span id="cb39-702"><a href="#cb39-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-703"><a href="#cb39-703" aria-hidden="true" tabindex="-1"></a><span class="fu">### Edit the DESCRIPTION File {.unnumbered}</span></span>
<span id="cb39-704"><a href="#cb39-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-705"><a href="#cb39-705" aria-hidden="true" tabindex="-1"></a>Just open the file, edit, and save (make sure the last line remains a line break)!</span>
<span id="cb39-706"><a href="#cb39-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-707"><a href="#cb39-707" aria-hidden="true" tabindex="-1"></a>  Package: multireg</span>
<span id="cb39-708"><a href="#cb39-708" aria-hidden="true" tabindex="-1"></a>  Title: A module for demonstrating multiple regression and ANCOVA</span>
<span id="cb39-709"><a href="#cb39-709" aria-hidden="true" tabindex="-1"></a>  Version: 0.0.1.0</span>
<span id="cb39-710"><a href="#cb39-710" aria-hidden="true" tabindex="-1"></a>  Authors@R: </span>
<span id="cb39-711"><a href="#cb39-711" aria-hidden="true" tabindex="-1"></a>    person(given = "Anthony",</span>
<span id="cb39-712"><a href="#cb39-712" aria-hidden="true" tabindex="-1"></a>           family = "Di Fiore",</span>
<span id="cb39-713"><a href="#cb39-713" aria-hidden="true" tabindex="-1"></a>           role = c("aut", "cre"),</span>
<span id="cb39-714"><a href="#cb39-714" aria-hidden="true" tabindex="-1"></a>           email = "anthony.difiore@austin.utexas.edu",</span>
<span id="cb39-715"><a href="#cb39-715" aria-hidden="true" tabindex="-1"></a>           comment = c(ORCID = "YOUR-ORCID-ID"))</span>
<span id="cb39-716"><a href="#cb39-716" aria-hidden="true" tabindex="-1"></a>  Description: This module is used to demonstrate building a package that contains a vignette about running multiple regression using an included dataset.</span>
<span id="cb39-717"><a href="#cb39-717" aria-hidden="true" tabindex="-1"></a>  License: GPL-3</span>
<span id="cb39-718"><a href="#cb39-718" aria-hidden="true" tabindex="-1"></a>  Encoding: UTF-8</span>
<span id="cb39-719"><a href="#cb39-719" aria-hidden="true" tabindex="-1"></a>  LazyData: true</span>
<span id="cb39-720"><a href="#cb39-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-721"><a href="#cb39-721" aria-hidden="true" tabindex="-1"></a><span class="fu">### Add Dependencies {.unnumbered}</span></span>
<span id="cb39-722"><a href="#cb39-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-725"><a href="#cb39-725" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-726"><a href="#cb39-726" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-727"><a href="#cb39-727" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"car"</span>)</span>
<span id="cb39-728"><a href="#cb39-728" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"jtools"</span>)</span>
<span id="cb39-729"><a href="#cb39-729" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">"sjPlot"</span>)</span>
<span id="cb39-730"><a href="#cb39-730" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-731"><a href="#cb39-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-732"><a href="#cb39-732" aria-hidden="true" tabindex="-1"></a><span class="fu">### Create Documentation Files {.unnumbered}</span></span>
<span id="cb39-733"><a href="#cb39-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-736"><a href="#cb39-736" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-737"><a href="#cb39-737" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-738"><a href="#cb39-738" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package_doc</span>()</span>
<span id="cb39-739"><a href="#cb39-739" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-740"><a href="#cb39-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-741"><a href="#cb39-741" aria-hidden="true" tabindex="-1"></a><span class="fu">### Add a Vignette Template {.unnumbered}</span></span>
<span id="cb39-742"><a href="#cb39-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-745"><a href="#cb39-745" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-746"><a href="#cb39-746" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-747"><a href="#cb39-747" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_vignette</span>(<span class="st">"vignette"</span>,</span>
<span id="cb39-748"><a href="#cb39-748" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Multiple Regression and ANCOVA Vignette"</span>)</span>
<span id="cb39-749"><a href="#cb39-749" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-750"><a href="#cb39-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-751"><a href="#cb39-751" aria-hidden="true" tabindex="-1"></a>Now, edit the vignette ".Rmd" file as you see fit!</span>
<span id="cb39-752"><a href="#cb39-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-753"><a href="#cb39-753" aria-hidden="true" tabindex="-1"></a>As an example, you can copy and paste the text and code below (the ***R*** code will need to be put in a code block) to the end of the vignette ".Rmd" file:</span>
<span id="cb39-754"><a href="#cb39-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-755"><a href="#cb39-755" aria-hidden="true" tabindex="-1"></a>----------</span>
<span id="cb39-756"><a href="#cb39-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-757"><a href="#cb39-757" aria-hidden="true" tabindex="-1"></a>The following code uses the **zombies** dataset bundled in the {multireg} package to run a linear model of height as a function of weight, age, and gender among survivors of the zombie apocalypse. Is the overall model significant? Are both predictor variables significant when the other is controlled for?</span>
<span id="cb39-758"><a href="#cb39-758" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb39-761"><a href="#cb39-761" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-762"><a href="#cb39-762" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb39-763"><a href="#cb39-763" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: "center"</span></span>
<span id="cb39-764"><a href="#cb39-764" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "50%"</span></span>
<span id="cb39-765"><a href="#cb39-765" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-766"><a href="#cb39-766" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb39-767"><a href="#cb39-767" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb39-768"><a href="#cb39-768" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jtools)</span>
<span id="cb39-769"><a href="#cb39-769" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjPlot)</span>
<span id="cb39-770"><a href="#cb39-770" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(zombies)</span>
<span id="cb39-771"><a href="#cb39-771" aria-hidden="true" tabindex="-1"></a>zombies<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(zombies<span class="sc">$</span>gender)</span>
<span id="cb39-772"><a href="#cb39-772" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> zombies, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> height)) <span class="sc">+</span></span>
<span id="cb39-773"><a href="#cb39-773" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> gender)) <span class="sc">+</span></span>
<span id="cb39-774"><a href="#cb39-774" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>))</span>
<span id="cb39-775"><a href="#cb39-775" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb39-776"><a href="#cb39-776" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> zombies, height <span class="sc">~</span> weight <span class="sc">+</span> age <span class="sc">+</span> gender)</span>
<span id="cb39-777"><a href="#cb39-777" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m)</span>
<span id="cb39-778"><a href="#cb39-778" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(m)</span>
<span id="cb39-779"><a href="#cb39-779" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">fitted</span>(m), <span class="fu">residuals</span>(m))</span>
<span id="cb39-780"><a href="#cb39-780" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">residuals</span>(m))</span>
<span id="cb39-781"><a href="#cb39-781" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_summs</span>(m, <span class="at">plot.distributions =</span> <span class="cn">TRUE</span>, <span class="at">rescale.distributions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-782"><a href="#cb39-782" aria-hidden="true" tabindex="-1"></a><span class="fu">tab_model</span>(m)</span>
<span id="cb39-783"><a href="#cb39-783" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-784"><a href="#cb39-784" aria-hidden="true" tabindex="-1"></a>----------</span>
<span id="cb39-785"><a href="#cb39-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-786"><a href="#cb39-786" aria-hidden="true" tabindex="-1"></a><span class="fu">### Add a Data Directory and Data {.unnumbered}</span></span>
<span id="cb39-787"><a href="#cb39-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-790"><a href="#cb39-790" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-791"><a href="#cb39-791" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-792"><a href="#cb39-792" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb39-793"><a href="#cb39-793" aria-hidden="true" tabindex="-1"></a><span class="co"># first, get the data to use...</span></span>
<span id="cb39-794"><a href="#cb39-794" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/difiore/ada-2024-datasets/main/zombies.csv"</span></span>
<span id="cb39-795"><a href="#cb39-795" aria-hidden="true" tabindex="-1"></a>zombies <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(f, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-796"><a href="#cb39-796" aria-hidden="true" tabindex="-1"></a><span class="co"># then, write this out as an R data file</span></span>
<span id="cb39-797"><a href="#cb39-797" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_data</span>(zombies)</span>
<span id="cb39-798"><a href="#cb39-798" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-799"><a href="#cb39-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-800"><a href="#cb39-800" aria-hidden="true" tabindex="-1"></a><span class="fu">### Build Vignettes {.unnumbered}</span></span>
<span id="cb39-801"><a href="#cb39-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-804"><a href="#cb39-804" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-805"><a href="#cb39-805" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-806"><a href="#cb39-806" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build_vignettes</span>()</span>
<span id="cb39-807"><a href="#cb39-807" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-808"><a href="#cb39-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-809"><a href="#cb39-809" aria-hidden="true" tabindex="-1"></a><span class="fu">### Process the Documentation Files {.unnumbered}</span></span>
<span id="cb39-810"><a href="#cb39-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-813"><a href="#cb39-813" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-814"><a href="#cb39-814" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-815"><a href="#cb39-815" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()</span>
<span id="cb39-816"><a href="#cb39-816" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-817"><a href="#cb39-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-818"><a href="#cb39-818" aria-hidden="true" tabindex="-1"></a><span class="fu">### Build the Package {.unnumbered}</span></span>
<span id="cb39-819"><a href="#cb39-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-822"><a href="#cb39-822" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-823"><a href="#cb39-823" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-824"><a href="#cb39-824" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">build</span>()</span>
<span id="cb39-825"><a href="#cb39-825" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-826"><a href="#cb39-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-827"><a href="#cb39-827" aria-hidden="true" tabindex="-1"></a><span class="fu">### Install the Package {.unnumbered}</span></span>
<span id="cb39-828"><a href="#cb39-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-831"><a href="#cb39-831" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-832"><a href="#cb39-832" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-833"><a href="#cb39-833" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install</span>(<span class="at">build_vignettes =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-834"><a href="#cb39-834" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb39-835"><a href="#cb39-835" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"~/Development/Repos/multireg_0.0.1.0.tar.gz"</span>,</span>
<span id="cb39-836"><a href="#cb39-836" aria-hidden="true" tabindex="-1"></a>  <span class="at">repos =</span> <span class="cn">NULL</span>, <span class="at">type =</span> <span class="st">"source"</span>,</span>
<span id="cb39-837"><a href="#cb39-837" aria-hidden="true" tabindex="-1"></a>  <span class="at">lib=</span><span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library"</span>)</span>
<span id="cb39-838"><a href="#cb39-838" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-839"><a href="#cb39-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-840"><a href="#cb39-840" aria-hidden="true" tabindex="-1"></a><span class="fu">### Check the Package for Errors {.unnumbered}</span></span>
<span id="cb39-841"><a href="#cb39-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-844"><a href="#cb39-844" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-845"><a href="#cb39-845" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-846"><a href="#cb39-846" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span>
<span id="cb39-847"><a href="#cb39-847" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-848"><a href="#cb39-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-849"><a href="#cb39-849" aria-hidden="true" tabindex="-1"></a><span class="fu">### Load and Use the Package {.unnumbered}</span></span>
<span id="cb39-850"><a href="#cb39-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-853"><a href="#cb39-853" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb39-854"><a href="#cb39-854" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb39-855"><a href="#cb39-855" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(multireg)</span>
<span id="cb39-856"><a href="#cb39-856" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(zombies)</span>
<span id="cb39-857"><a href="#cb39-857" aria-hidden="true" tabindex="-1"></a>utils<span class="sc">::</span><span class="fu">vignette</span>(<span class="at">package =</span> <span class="st">"multireg"</span>)</span>
<span id="cb39-858"><a href="#cb39-858" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb39-859"><a href="#cb39-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-860"><a href="#cb39-860" aria-hidden="true" tabindex="-1"></a>Then, CHECK OUT YOUR VIGNETTE AND DATA!!!</span>
<span id="cb39-861"><a href="#cb39-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-862"><a href="#cb39-862" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; **NOTE**: You may need to restart ***R*** before you </span><span class="in">`library()`</span><span class="at"> your package to get the package manager to refresh with your newly built package and any vignettes to appear properly.</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>