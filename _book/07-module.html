<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Applied Data Analysis 2024 - 12&nbsp; Module 07</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./08-module.html" rel="next">
<link href="./06-module.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>


<link rel="stylesheet" href="css/style.css">
</head>

<body class="nav-sidebar docked fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./00-part-1.html"><strong>Part I</strong> - Using <strong><em>R</em></strong> and <strong><em>RStudio</em></strong></a></li><li class="breadcrumb-item"><a href="./07-module.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Module 07</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applied Data Analysis 2024</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title"><strong>Applied Data Analysis S2022</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./00-preliminaries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">__Preliminaries__</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-course-logistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Course Logistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-typography-and-formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Typography and Formatting</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-programming-style-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Programming Style Guide</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-course-schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Course Schedule</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./00-part-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">**Part I** - Using ***R*** and ***RStudio***</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Module 01</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Module 02</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Module 03</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Module 04</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Module 05</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Module 06</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-module.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Module 07</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-module.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Module 08</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Exercise 01</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">List of Packages Used</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Module 07</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="module-07" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> Additional Data Structures in <strong><em>R</em></strong></h1>
<section id="objectives" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="objectives"><span class="header-section-number">13.1</span> Objectives</h2>
<blockquote class="blockquote">
<p>The objective of this module is to introduce additional fundamental data structures in <strong><em>R</em></strong> (matrices, arrays, lists, data frames, and the like) and to learn how to extract, filter, and subset data from them.</p>
</blockquote>
</section>
<section id="preliminaries" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="preliminaries"><span class="header-section-number">13.2</span> Preliminaries</h2>
<ul>
<li>GO TO: <a href="https://github.com/difiore/ada-2022-datasets" class="uri">https://github.com/difiore/ada-2022-datasets</a>, select the “random-people.csv” file, then press the “RAW” button, highlight, and copy the text to a text editor, and save it locally (e.g., on your desktop). <strong><em>RStudio</em></strong>, as we have seen, has a powerful built-in text editor. There are also a number of other excellent text editors that you download for FREE (e.g., <a href="https://www.barebones.com/products/bbedit/"><strong><em>BBEdit</em></strong></a> for MacOS, <a href="https://notepad-plus-plus.org/"><strong><em>Notepad++</em></strong></a> for Windows, or <a href="https://atom.io/"><strong><em>Atom</em></strong></a> or <a href="https://code.visualstudio.com/"><strong><em>Visual Studio Code</em></strong></a> for either operating system).</li>
<li>Install and load these packages in <strong><em>R</em></strong>: <a href="https://cran.r-project.org/web/packages/tidyverse/tidyverse.pdf">{tidyverse}</a> (which includes {ggplot2}, {dplyr}, {readr}, {tibble}, and {tidyr}, plus others, so they do not need to be installed separately) and <a href="https://cran.r-project.org/web/packages/data.table/data.table.pdf">{data.table}</a></li>
</ul>
</section>
<section id="matrices-and-arrays" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="matrices-and-arrays"><span class="header-section-number">13.3</span> Matrices and Arrays</h2>
<p>So far, we have seen several way of creating <strong>vectors</strong>, which are the most fundamental data structures in <strong><em>R</em></strong>. Today, we will explore and learn how to manipulate other fundamental data structures, including <strong>matrices</strong>, <strong>arrays</strong>, <strong>lists</strong>, and <strong>data frames</strong>, as well as variants on data frames (e.g., <strong>data tables</strong> and <strong>“tibbles”</strong>.)</p>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> The kind of vectors we have been talking about so far are also sometimes referred to as <em>atomic vectors</em>, and all of the elements of a vector have to have the same data type. We can think of <strong>lists</strong> (see below) as a different kind of vector, where the elements can have different types, but I prefer to consider lists as a different kind of data structure. Wickham (2019) <em>Advanced R, Second Edition</em> discusses the nuances of various <strong><em>R</em></strong> data structures in more detail.</p>
</blockquote>
<p>Matrices and arrays are extensions of the basic vector data structure, and like vectors, all of the elements in an array or matrix have to be of the same atomic type.</p>
<p>We can think of a <strong>matrix</strong> as a <em>two-dimensional</em> structure consisting of several atomic vectors stored together, but, more accurately, a matrix is essentially a single atomic vector that is split either into multiple columns or multiple rows of the same length. Matrices are useful constructs for performing many mathematical and statistical operations. Again, like 1-dimensional atomic vectors, matrices can only store data of one atomic class (e.g., <em>numerical</em> or <em>character</em>). Matrices are created using the <code>matrix()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    3
[2,]    2    4</code></pre>
</div>
</div>
<p>Matrices are typically filled column-wise, with the argument, <code>byrow=</code>, set to FALSE by default (note that FALSE is not in quotation marks). This means that the first column of the matrix will be filled first, the second column second, etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol =</span> <span class="dv">3</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">byrow =</span> <span class="cn">FALSE</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6</code></pre>
</div>
</div>
<p>This pattern can be changed by specifying the <code>byrow=</code> argument as TRUE.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol =</span> <span class="dv">3</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">byrow =</span> <span class="cn">TRUE</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6</code></pre>
</div>
</div>
<p>You can also create matrices by <em>binding</em> vectors of the same length together either row-wise (with the function <code>rbind()</code>) or column-wise (with the function <code>cbind()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(v1, v2)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>m1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [,1] [,2] [,3] [,4]
v1    1    2    3    4
v2    6    7    8    9</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(v1, v2)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>m2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     v1 v2
[1,]  1  6
[2,]  2  7
[3,]  3  8
[4,]  4  9</code></pre>
</div>
</div>
<p>Standard metadata about a matrix can be extracted using the <code>class()</code>, <code>dim()</code>, <code>names()</code>, <code>rownames()</code>, <code>colnames()</code> and other commands. The <code>dim()</code> command returns an vector containing the number of rows at index position 1 and the number of columns at index position 2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "matrix" "array" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "matrix" "array" </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "v1" "v2"</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> In this example, <code>colnames</code> are not defined for <strong>m1</strong> since <code>rbind()</code> was used to create the matrix.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "v1" "v2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> Similarly, in this example, <code>rownames</code> are not defined for <strong>m2</strong>, since <code>cbind()</code> was used to create the matrix.</p>
</blockquote>
<p>As we saw with vectors, the <em>structure</em> (<code>str()</code>) and <em>glimpse</em> (<code>dplyr::glimpse()</code>) commands can be applied to any data structure to provide details about that object. These are incredibly useful functions that you will find yourself using over and over again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:2, 1:4] 1 6 2 7 3 8 4 9
 - attr(*, "dimnames")=List of 2
  ..$ : chr [1:2] "v1" "v2"
  ..$ : NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(m2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:4, 1:2] 1 2 3 4 6 7 8 9
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:2] "v1" "v2"</code></pre>
</div>
</div>
<p>The <em>attributes</em> (<code>attributes()</code>) command can be used to list the attributes of a data structure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(m1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$dim
[1] 2 4

$dimnames
$dimnames[[1]]
[1] "v1" "v2"

$dimnames[[2]]
NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(m1,<span class="at">which=</span><span class="st">"dim"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(m1,<span class="at">which=</span><span class="st">"dimnames"</span>)[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "v1" "v2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(m1,<span class="at">which=</span><span class="st">"dimnames"</span>)[[<span class="dv">2</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<p>An <strong>array</strong> is a more general atomic data structure, of which a vector (with 1 implicit dimension) and a matrix (with 2 defined dimensions) are but examples. Arrays can include additional dimensions, but (like vectors and matrices) they can only include elements that are all of the same atomic data class (e.g., <code>numeric</code>, <code>character</code>). The example below shows the construction of a 3 dimensional array with 5 rows, 6 columns, and 3 “levels”). Visualizing higher and higher dimension arrays, obviously, becomes challenging!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="at">data=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">90</span>, <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">3</span>))</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , 1

     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    6   11   16   21   26
[2,]    2    7   12   17   22   27
[3,]    3    8   13   18   23   28
[4,]    4    9   14   19   24   29
[5,]    5   10   15   20   25   30

, , 2

     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]   31   36   41   46   51   56
[2,]   32   37   42   47   52   57
[3,]   33   38   43   48   53   58
[4,]   34   39   44   49   54   59
[5,]   35   40   45   50   55   60

, , 3

     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]   61   66   71   76   81   86
[2,]   62   67   72   77   82   87
[3,]   63   68   73   78   83   88
[4,]   64   69   74   79   84   89
[5,]   65   70   75   80   85   90</code></pre>
</div>
</div>
<section id="subsetting" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="subsetting">Subsetting</h3>
<p>You can reference or extract select elements from vectors, matrices, and arrays by <em>subsetting</em> them using their index position(s) in what is knows as <strong>bracket notation</strong> (<code>[ ]</code>). For vectors, you would specify an index value in one dimension. For matrices, you would give the index values in two dimensions. For arrays generally, you would give index values for each dimension in the array.</p>
<p>For example, suppose you have the following vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>v</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18
 [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36
 [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54
 [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72
 [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90
 [91]  91  92  93  94  95  96  97  98  99 100</code></pre>
</div>
</div>
<p>You can select the first 15 elements using bracket notation as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>v[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15</code></pre>
</div>
</div>
<p>You can also supply a vector of index values as the argument to <code>[ ]</code> to use for subsetting:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>v[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  4  6  8 10</code></pre>
</div>
</div>
<p>Similarly, you can also use a function or a calculation to subset a vector. What does the following return?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="dv">101</span><span class="sc">:</span><span class="dv">200</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>v[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">2</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 101 103 105 107 109 111 113 115 117 119 121 123 125 127 129 131 133 135 137
[20] 139 141 143 145 147 149 151 153 155 157 159 161 163 165 167 169 171 173 175
[39] 177 179 181 183 185 187 189 191 193 195 197 199</code></pre>
</div>
</div>
<p>As an example for a matrix, suppose you have the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>, <span class="at">nrow=</span><span class="dv">8</span>, <span class="at">ncol=</span><span class="dv">10</span>, <span class="at">byrow=</span><span class="cn">FALSE</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    1    9   17   25   33   41   49   57   65    73
[2,]    2   10   18   26   34   42   50   58   66    74
[3,]    3   11   19   27   35   43   51   59   67    75
[4,]    4   12   20   28   36   44   52   60   68    76
[5,]    5   13   21   29   37   45   53   61   69    77
[6,]    6   14   22   30   38   46   54   62   70    78
[7,]    7   15   23   31   39   47   55   63   71    79
[8,]    8   16   24   32   40   48   56   64   72    80</code></pre>
</div>
</div>
<p>You can extract the element in row 4, column 5 and assign it to a new variable, <strong>x</strong>, as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36</code></pre>
</div>
</div>
<p>You can also extract an entire row or an entire column (or set of rows or set of columns) from a matrix by specifying the desired row or column number(s) and leaving the other value blank.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">4</span>, ] <span class="co"># extracts 4th row</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  4 12 20 28 36 44 52 60 68 76</code></pre>
</div>
</div>
</section>
<section id="challenge" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="challenge">CHALLENGE:</h3>
<ul>
<li>Given the matrix, <strong>m</strong>, above, extract the 2nd, 3rd, and 6th columns and assign them to the variable <strong>x</strong></li>
</ul>
<div class="fold s o">
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">6</span>)]</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    9   17   41
[2,]   10   18   42
[3,]   11   19   43
[4,]   12   20   44
[5,]   13   21   45
[6,]   14   22   46
[7,]   15   23   47
[8,]   16   24   48</code></pre>
</div>
</div>
</div>
<ul>
<li>Given the matrix, <strong>m</strong>, above, extract the 6th to 8th row and assign them to the variable <strong>x</strong></li>
</ul>
<div class="fold s o">
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>, ]</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    6   14   22   30   38   46   54   62   70    78
[2,]    7   15   23   31   39   47   55   63   71    79
[3,]    8   16   24   32   40   48   56   64   72    80</code></pre>
</div>
</div>
</div>
<ul>
<li>Given the matrix, <strong>m</strong>, above, extract the elements from row 2, column 2 to row 6, column 9 and assign them to the variable <strong>x</strong></li>
</ul>
<div class="fold s o">
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> m[<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>]</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]   10   18   26   34   42   50   58   66
[2,]   11   19   27   35   43   51   59   67
[3,]   12   20   28   36   44   52   60   68
[4,]   13   21   29   37   45   53   61   69
[5,]   14   22   30   38   46   54   62   70</code></pre>
</div>
</div>
</div>
</section>
<section id="overwriting-elements" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="overwriting-elements">Overwriting Elements</h3>
<p>You can replace elements in a vector or matrix, or even entire rows or columns, by identifying the elements to be replaced and then assigning them new values.</p>
<p>Starting with the matrix, <strong>m</strong>, defined above, explore what will be the effects of operations below. Pay careful attention to row and column index values, vector recycling, and automated conversion/recasting among data classes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">7</span>, <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">564</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>m[ ,<span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">19</span>, <span class="dv">18</span>, <span class="dv">17</span>)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">c</span>(<span class="dv">20</span><span class="sc">:</span><span class="dv">1</span>),</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow =</span> <span class="dv">4</span>,</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol =</span> <span class="dv">5</span>,</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">byrow =</span> <span class="cn">TRUE</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>m[ ,<span class="dv">8</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="lists-and-data-frames" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="lists-and-data-frames"><span class="header-section-number">13.4</span> Lists and Data Frames</h2>
<p>Unlike vectors, matrices, and arrays, two other data structures - <strong>lists</strong> and <strong>data frames</strong> - can be used to group together a heterogeneous mix of <strong><em>R</em></strong> structures and objects. A single list, for example, could contain a matrix, vector of character strings, vector of factors, an array, even another list.</p>
<p><strong>Lists</strong> are created using the <code>list()</code> function where the elements to add to the list are given as arguments to the function, separated by commas. Type in the following example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"this"</span>, <span class="st">"is"</span>, <span class="st">"a"</span>, <span class="st">"vector"</span>, <span class="st">"of"</span>, <span class="st">"strings"</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this is a vector of character strings</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">40</span>, <span class="at">nrow=</span><span class="dv">5</span>, <span class="at">ncol=</span><span class="dv">8</span>) <span class="co"># this is a matrix</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="cn">FALSE</span> <span class="co"># this is a boolean variable</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(s, m, b)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>l</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "this"    "is"      "a"       "vector"  "of"      "strings"

[[2]]
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    1    6   11   16   21   26   31   36
[2,]    2    7   12   17   22   27   32   37
[3,]    3    8   13   18   23   28   33   38
[4,]    4    9   14   19   24   29   34   39
[5,]    5   10   15   20   25   30   35   40

[[3]]
[1] FALSE</code></pre>
</div>
</div>
<section id="subsetting-lists" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="subsetting-lists">Subsetting Lists</h3>
<p>You can reference or extract elements from a list similarly to how you would from other data structure, except that you use <strong>double brackets</strong> (<code>[[ ]]</code>) to reference a single element in the list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    1    6   11   16   21   26   31   36
[2,]    2    7   12   17   22   27   32   37
[3,]    3    8   13   18   23   28   33   38
[4,]    4    9   14   19   24   29   34   39
[5,]    5   10   15   20   25   30   35   40</code></pre>
</div>
</div>
<p>An extension of this notation can be used to access elements contained <em>within</em> an element in the list. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][<span class="dv">2</span>, <span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][<span class="dv">2</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  7 12 17 22 27 32 37</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][ ,<span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 26 27 28 29 30</code></pre>
</div>
</div>
<p>To reference or extract multiple elements from a list, you would use <strong>single bracket</strong> (<code>[ ]</code>) notation, which would itself return a list. This is called “list slicing”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>l[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    1    6   11   16   21   26   31   36
[2,]    2    7   12   17   22   27   32   37
[3,]    3    8   13   18   23   28   33   38
[4,]    4    9   14   19   24   29   34   39
[5,]    5   10   15   20   25   30   35   40

[[2]]
[1] FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>l[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "this"    "is"      "a"       "vector"  "of"      "strings"

[[2]]
[1] FALSE</code></pre>
</div>
</div>
<p>Using <code>class()</code> and <code>str()</code> (or <code>dplyr::glimpse()</code>) provides details about the our list and its three elements:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ : chr [1:6] "this" "is" "a" "vector" ...
 $ : int [1:5, 1:8] 1 2 3 4 5 6 7 8 9 10 ...
 $ : logi FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ : chr [1:6] "this" "is" "a" "vector" ...
 $ : int [1:5, 1:8] 1 2 3 4 5 6 7 8 9 10 ...
 $ : logi FALSE</code></pre>
</div>
</div>
<p>You can <em>name</em> the elements in a list using the <code>names()</code> function, which adds a name attribute to each list item.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(l) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"string"</span>, <span class="st">"matrix"</span>, <span class="st">"logical"</span>)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "string"  "matrix"  "logical"</code></pre>
</div>
</div>
<p>You can also use the name of an item in the list to refer to it using the shortcut <code>$</code> notation. This is the equivalent of using <code>[[ ]]</code> with either the column number or the name of the column in quotation marks as the argument inside of the double bracket.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all of the following are equivalent!</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>l<span class="sc">$</span>string</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "this"    "is"      "a"       "vector"  "of"      "strings"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "this"    "is"      "a"       "vector"  "of"      "strings"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="st">"string"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "this"    "is"      "a"       "vector"  "of"      "strings"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all of the following are equivalent</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>l<span class="sc">$</span>matrix[<span class="dv">3</span>, <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">2</span>]][<span class="dv">3</span>, <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="st">"matrix"</span>]][<span class="dv">3</span>, <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23</code></pre>
</div>
</div>
<p>The <strong>data frame</strong> is the perhaps the most useful (and most familiar) data structure that we can operate with in <strong><em>R</em></strong> as it most closely aligns with how we tend to represent tabular data, with rows as <em>cases</em> or <em>observations</em> and columns as <em>variables</em> describing those observations (e.g., a measurement of a particular type). Variables tend to be measured using the same units and thus fall into the same data class and can be thought of as analogous to vectors, so a data frame is essentially a list of atomic vectors that all have the same length.</p>
<p>The <code>data.frame()</code> command can be used to create data frames from scratch.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>),</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>),</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>)</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  firstName  community sex age
1      Rick Alexandria   M  42
2     Negan    Saviors   M  40
3    Dwight    Saviors   M  33
4    Maggie     Hiltop   F  28
5  Michonne Alexandria   F  31</code></pre>
</div>
</div>
<p>More commonly we read tabular data into <strong><em>R</em></strong> from some external data source (see <a href="08-module.html#module-08"><strong>Module 08</strong></a>, which typically results in the table being represented as a data frame. The following code, for example, will read from the file “random-people.csv” stored in a folder called “data” (a <code>data/</code> directory) located inside a user’s working directory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read.csv</span>(</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">"data/random-people.csv"</span>,</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">","</span>,</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="co"># only print select columns of this data frame</span></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="co"># head() means we will also only print the first several rows</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">11</span>, <span class="dv">12</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  gender name.first name.last login.password           dob
1   male        ted    wright          rolex  11/8/73 1:33
2   male    quentin   schmitt         norton  5/24/51 3:16
3 female      laura  johansen        stevens 5/22/77 21:03
4   male     ismael   herrero         303030   8/1/58 9:13
5 female     susana    blanco          aloha 12/18/55 3:21
6   male      mason    wilson         topdog  6/23/60 9:19</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> To run the example code above, you may need to replace the string in <code>file="&lt;string&gt;"</code> with the path to where you stored the file on your local computer.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   20 obs. of  17 variables:
 $ gender           : chr  "male" "male" "female" "male" ...
 $ name.title       : chr  "mr" "mr" "ms" "mr" ...
 $ name.first       : chr  "ted" "quentin" "laura" "ismael" ...
 $ name.last        : chr  "wright" "schmitt" "johansen" "herrero" ...
 $ location.street  : chr  "2020 royal ln" "2433 rue dubois" "2142 elmelunden" "3897 calle del barquillo" ...
 $ location.city    : chr  "coffs harbour" "vitry-sur-seine" "silkeboeg" "gandia" ...
 $ location.state   : chr  "tasmania" "indre-et-loire" "hovedstaden" "ceuta" ...
 $ location.postcode: chr  "4126" "99856" "16264" "61349" ...
 $ email            : chr  "ted.wright@example.com" "quentin.schmitt@example.com" "laura.johansen@example.com" "ismael.herrero@example.com" ...
 $ login.username   : chr  "organicleopard402" "bluegoose191" "orangebird528" "heavyswan518" ...
 $ login.password   : chr  "rolex" "norton" "stevens" "303030" ...
 $ dob              : chr  "11/8/73 1:33" "5/24/51 3:16" "5/22/77 21:03" "8/1/58 9:13" ...
 $ date.registered  : chr  "5/5/07 20:26" "4/11/11 7:05" "5/16/14 15:53" "2/17/06 16:53" ...
 $ phone            : chr  "01-0349-5128" "05-72-65-32-21" "81616775" "974-117-403" ...
 $ cell             : chr  "0449-989-455" "06-83-24-92-41" "697-993-20" "665-791-673" ...
 $ picture.large    : chr  "https://randomuser.me/api/portraits/men/48.jpg" "https://randomuser.me/api/portraits/men/53.jpg" "https://randomuser.me/api/portraits/women/70.jpg" "https://randomuser.me/api/portraits/men/79.jpg" ...
 $ nat              : chr  "AU" "FR" "DK" "ES" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 20
Columns: 17
$ gender            &lt;chr&gt; "male", "male", "female", "male", "female", "male", …
$ name.title        &lt;chr&gt; "mr", "mr", "ms", "mr", "ms", "mr", "mr", "miss", "m…
$ name.first        &lt;chr&gt; "ted", "quentin", "laura", "ismael", "susana", "maso…
$ name.last         &lt;chr&gt; "wright", "schmitt", "johansen", "herrero", "blanco"…
$ location.street   &lt;chr&gt; "2020 royal ln", "2433 rue dubois", "2142 elmelunden…
$ location.city     &lt;chr&gt; "coffs harbour", "vitry-sur-seine", "silkeboeg", "ga…
$ location.state    &lt;chr&gt; "tasmania", "indre-et-loire", "hovedstaden", "ceuta"…
$ location.postcode &lt;chr&gt; "4126", "99856", "16264", "61349", "29445", "91479",…
$ email             &lt;chr&gt; "ted.wright@example.com", "quentin.schmitt@example.c…
$ login.username    &lt;chr&gt; "organicleopard402", "bluegoose191", "orangebird528"…
$ login.password    &lt;chr&gt; "rolex", "norton", "stevens", "303030", "aloha", "to…
$ dob               &lt;chr&gt; "11/8/73 1:33", "5/24/51 3:16", "5/22/77 21:03", "8/…
$ date.registered   &lt;chr&gt; "5/5/07 20:26", "4/11/11 7:05", "5/16/14 15:53", "2/…
$ phone             &lt;chr&gt; "01-0349-5128", "05-72-65-32-21", "81616775", "974-1…
$ cell              &lt;chr&gt; "0449-989-455", "06-83-24-92-41", "697-993-20", "665…
$ picture.large     &lt;chr&gt; "https://randomuser.me/api/portraits/men/48.jpg", "h…
$ nat               &lt;chr&gt; "AU", "FR", "DK", "ES", "ES", "NZ", "DE", "US", "TR"…</code></pre>
</div>
</div>
<p>As for other data structures, you can select and subset data frames using <strong>single bracket notation</strong> (<code>[ ]</code>). You can also select named columns from a data frame using the <code>$</code> operator or the equivalent <strong>double bracket notation</strong> (<code>[[ ]]</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single bracket notation</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "wright"     "schmitt"    "johansen"   "herrero"    "blanco"    
 [6] "wilson"     "strauio"    "gordon"     "limoncuocu" "perrin"    
[11] "lopez"      "waisanen"   "brewer"     "brown"      "baettner"  
[16] "wallace"    "gonzalez"   "neva"       "barnaby"    "moser"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[, <span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:20] "wright" "schmitt" "johansen" "herrero" "blanco" "wilson" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following are all equivalent…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using the $ operator with the column name</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>name.last</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "wright"     "schmitt"    "johansen"   "herrero"    "blanco"    
 [6] "wilson"     "strauio"    "gordon"     "limoncuocu" "perrin"    
[11] "lopez"      "waisanen"   "brewer"     "brown"      "baettner"  
[16] "wallace"    "gonzalez"   "neva"       "barnaby"    "moser"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df<span class="sc">$</span>name.last)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:20] "wright" "schmitt" "johansen" "herrero" "blanco" "wilson" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column `name.last`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using double bracket notation and a column index</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>df[[<span class="dv">4</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "wright"     "schmitt"    "johansen"   "herrero"    "blanco"    
 [6] "wilson"     "strauio"    "gordon"     "limoncuocu" "perrin"    
[11] "lopez"      "waisanen"   "brewer"     "brown"      "baettner"  
[16] "wallace"    "gonzalez"   "neva"       "barnaby"    "moser"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[[<span class="dv">4</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:20] "wright" "schmitt" "johansen" "herrero" "blanco" "wilson" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using double bracket notation with the column name</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"name.last"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "wright"     "schmitt"    "johansen"   "herrero"    "blanco"    
 [6] "wilson"     "strauio"    "gordon"     "limoncuocu" "perrin"    
[11] "lopez"      "waisanen"   "brewer"     "brown"      "baettner"  
[16] "wallace"    "gonzalez"   "neva"       "barnaby"    "moser"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[[<span class="st">"name.last"</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:20] "wright" "schmitt" "johansen" "herrero" "blanco" "wilson" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns the vector of data stored in column `name.last`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that the following return data structures that are <em>not quite the same</em> as those returned above. Instead, these return <strong>data frames</strong> rather than <strong>vectors</strong>!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using single bracket notation with a column index and no row index</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df[<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  name.last
1    wright
2   schmitt
3  johansen
4   herrero
5    blanco
6    wilson</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   20 obs. of  1 variable:
 $ name.last: chr  "wright" "schmitt" "johansen" "herrero" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame of the data from column 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using single bracket notation with a column name</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df[<span class="st">"name.last"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  name.last
1    wright
2   schmitt
3  johansen
4   herrero
5    blanco
6    wilson</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[<span class="st">"name.last"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   20 obs. of  1 variable:
 $ name.last: chr  "wright" "schmitt" "johansen" "herrero" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># returns a data frame of the data from column `name.last`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As with matrixes, you can add rows (additional cases) or columns (additional variables) to a data frame using <code>rbind()</code> and <code>cbind()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df, <span class="at">id=</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>))</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(df, <span class="at">school=</span><span class="fu">c</span>(<span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>,</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Texas Tech"</span>, <span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>,</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"Texas Tech"</span>,</span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>))</span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  gender name.title name.first name.last          location.street
1   male         mr        ted    wright            2020 royal ln
2   male         mr    quentin   schmitt          2433 rue dubois
3 female         ms      laura  johansen          2142 elmelunden
4   male         mr     ismael   herrero 3897 calle del barquillo
5 female         ms     susana    blanco  2208 avenida de america
6   male         mr      mason    wilson         4576 wilson road
    location.city location.state location.postcode                       email
1   coffs harbour       tasmania              4126      ted.wright@example.com
2 vitry-sur-seine indre-et-loire             99856 quentin.schmitt@example.com
3       silkeboeg    hovedstaden             16264  laura.johansen@example.com
4          gandia          ceuta             61349  ismael.herrero@example.com
5        mastoles    extremadura             29445   susana.blanco@example.com
6         dunedin       taranaki             91479    mason.wilson@example.com
     login.username login.password           dob date.registered          phone
1 organicleopard402          rolex  11/8/73 1:33    5/5/07 20:26   01-0349-5128
2      bluegoose191         norton  5/24/51 3:16    4/11/11 7:05 05-72-65-32-21
3     orangebird528        stevens 5/22/77 21:03   5/16/14 15:53       81616775
4      heavyswan518         303030   8/1/58 9:13   2/17/06 16:53    974-117-403
5    silverkoala701          aloha 12/18/55 3:21   10/3/02 17:55    917-199-202
6    organicduck470         topdog  6/23/60 9:19    12/1/08 8:31 (137)-326-5772
            cell                                    picture.large nat id school
1   0449-989-455   https://randomuser.me/api/portraits/men/48.jpg  AU  1     UT
2 06-83-24-92-41   https://randomuser.me/api/portraits/men/53.jpg  FR  2     UT
3     697-993-20 https://randomuser.me/api/portraits/women/70.jpg  DK  3    A&amp;M
4    665-791-673   https://randomuser.me/api/portraits/men/79.jpg  ES  4    A&amp;M
5    612-612-929 https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
6 (700)-060-1523   https://randomuser.me/api/portraits/men/60.jpg  NZ  6   Rice</code></pre>
</div>
</div>
<p>Alternatively, you can extend a data frame by adding a new variable directly using the <code>$</code> operator, like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>school <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"Texas Tech"</span>,</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>               <span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"UT"</span>,</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>               <span class="st">"A&amp;M"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>)</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  gender name.title name.first name.last          location.street
1   male         mr        ted    wright            2020 royal ln
2   male         mr    quentin   schmitt          2433 rue dubois
3 female         ms      laura  johansen          2142 elmelunden
4   male         mr     ismael   herrero 3897 calle del barquillo
5 female         ms     susana    blanco  2208 avenida de america
6   male         mr      mason    wilson         4576 wilson road
    location.city location.state location.postcode                       email
1   coffs harbour       tasmania              4126      ted.wright@example.com
2 vitry-sur-seine indre-et-loire             99856 quentin.schmitt@example.com
3       silkeboeg    hovedstaden             16264  laura.johansen@example.com
4          gandia          ceuta             61349  ismael.herrero@example.com
5        mastoles    extremadura             29445   susana.blanco@example.com
6         dunedin       taranaki             91479    mason.wilson@example.com
     login.username login.password           dob date.registered          phone
1 organicleopard402          rolex  11/8/73 1:33    5/5/07 20:26   01-0349-5128
2      bluegoose191         norton  5/24/51 3:16    4/11/11 7:05 05-72-65-32-21
3     orangebird528        stevens 5/22/77 21:03   5/16/14 15:53       81616775
4      heavyswan518         303030   8/1/58 9:13   2/17/06 16:53    974-117-403
5    silverkoala701          aloha 12/18/55 3:21   10/3/02 17:55    917-199-202
6    organicduck470         topdog  6/23/60 9:19    12/1/08 8:31 (137)-326-5772
            cell                                    picture.large nat id school
1   0449-989-455   https://randomuser.me/api/portraits/men/48.jpg  AU  1     UT
2 06-83-24-92-41   https://randomuser.me/api/portraits/men/53.jpg  FR  2     UT
3     697-993-20 https://randomuser.me/api/portraits/women/70.jpg  DK  3    A&amp;M
4    665-791-673   https://randomuser.me/api/portraits/men/79.jpg  ES  4    A&amp;M
5    612-612-929 https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
6 (700)-060-1523   https://randomuser.me/api/portraits/men/60.jpg  NZ  6   Rice</code></pre>
</div>
</div>
<p>Using the <code>[[ ]]</code> operator with a new variable name in quotation marks works, too:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"school"</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"Texas Tech"</span>,</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"UT"</span>, <span class="st">"UT"</span>, <span class="st">"Texas State"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>, <span class="st">"Rice"</span>, <span class="st">"UT"</span>,</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"A&amp;M"</span>, <span class="st">"Texas Tech"</span>, <span class="st">"A&amp;M"</span>, <span class="st">"UT"</span>,  <span class="st">"Texas State"</span>,</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"A&amp;M"</span>)</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  gender name.title name.first name.last          location.street
1   male         mr        ted    wright            2020 royal ln
2   male         mr    quentin   schmitt          2433 rue dubois
3 female         ms      laura  johansen          2142 elmelunden
4   male         mr     ismael   herrero 3897 calle del barquillo
5 female         ms     susana    blanco  2208 avenida de america
6   male         mr      mason    wilson         4576 wilson road
    location.city location.state location.postcode                       email
1   coffs harbour       tasmania              4126      ted.wright@example.com
2 vitry-sur-seine indre-et-loire             99856 quentin.schmitt@example.com
3       silkeboeg    hovedstaden             16264  laura.johansen@example.com
4          gandia          ceuta             61349  ismael.herrero@example.com
5        mastoles    extremadura             29445   susana.blanco@example.com
6         dunedin       taranaki             91479    mason.wilson@example.com
     login.username login.password           dob date.registered          phone
1 organicleopard402          rolex  11/8/73 1:33    5/5/07 20:26   01-0349-5128
2      bluegoose191         norton  5/24/51 3:16    4/11/11 7:05 05-72-65-32-21
3     orangebird528        stevens 5/22/77 21:03   5/16/14 15:53       81616775
4      heavyswan518         303030   8/1/58 9:13   2/17/06 16:53    974-117-403
5    silverkoala701          aloha 12/18/55 3:21   10/3/02 17:55    917-199-202
6    organicduck470         topdog  6/23/60 9:19    12/1/08 8:31 (137)-326-5772
            cell                                    picture.large nat id school
1   0449-989-455   https://randomuser.me/api/portraits/men/48.jpg  AU  1     UT
2 06-83-24-92-41   https://randomuser.me/api/portraits/men/53.jpg  FR  2     UT
3     697-993-20 https://randomuser.me/api/portraits/women/70.jpg  DK  3    A&amp;M
4    665-791-673   https://randomuser.me/api/portraits/men/79.jpg  ES  4    A&amp;M
5    612-612-929 https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
6 (700)-060-1523   https://randomuser.me/api/portraits/men/60.jpg  NZ  6   Rice</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>NOTE:</strong> In the above examples, <code>cbind()</code> results in <strong>school</strong> being added as a <em>factor</em> while using the <strong>$</strong> operator results in <strong>school</strong> being added as a <em>character</em> vector. You can see this by using the <code>str()</code> command.</p>
</blockquote>
<p>A <em>factor</em> is another atomic data class for <strong><em>R</em></strong> for dealing efficiently with nominal variables, usually character strings. Internally, <strong><em>R</em></strong> assigns integer values to each unique string (e.g., 1 for “female”, 2 for “male”, etc.).</p>
</section>
<section id="filtering-rows-of-a-data-frame" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="filtering-rows-of-a-data-frame">Filtering Rows of a Data Frame</h3>
<p>An expression that evaluates to a logical vector also be used to subset data frames. Here, we filter the data frame for only those rows where the variable <strong>school</strong> is “UT”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span>, ]</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   gender name.title name.first  name.last         location.street
1    male         mr        ted     wright           2020 royal ln
2    male         mr    quentin    schmitt         2433 rue dubois
5  female         ms     susana     blanco 2208 avenida de america
8  female       miss     kaylee     gordon         5475 camden ave
9    male         mr     baraek limoncuocu          2664 baedat cd
12   male         mr   valtteri   waisanen          9850 hemeentie
14 female       miss   kimberly      brown         8654 manor road
18 female         ms       ella       neva          4620 visiokatu
     location.city location.state location.postcode
1    coffs harbour       tasmania              4126
2  vitry-sur-seine indre-et-loire             99856
5         mastoles    extremadura             29445
8            flint         oregon             84509
9            siirt          tokat             86146
12          halsua  south karelia             58124
14          bangor        borders          HI92 8RY
18          kerava finland proper             26385
                             email    login.username login.password
1           ted.wright@example.com organicleopard402          rolex
2      quentin.schmitt@example.com      bluegoose191         norton
5        susana.blanco@example.com    silverkoala701          aloha
8        kaylee.gordon@example.com beautifulgoose794       atlantis
9  baraek.limoncuoculu@example.com whitebutterfly599         tobias
12   valtteri.waisanen@example.com        redswan919       nocturne
14      kimberly.brown@example.com  crazyelephant996       nebraska
18           ella.neva@example.com  orangegorilla786       f00tball
              dob date.registered          phone           cell
1    11/8/73 1:33    5/5/07 20:26   01-0349-5128   0449-989-455
2    5/24/51 3:16    4/11/11 7:05 05-72-65-32-21 06-83-24-92-41
5   12/18/55 3:21   10/3/02 17:55    917-199-202    612-612-929
8   3/24/48 12:22     5/5/13 8:14 (817)-962-1275 (831)-325-1142
9    5/8/92 22:01    9/12/04 0:56 (023)-879-4331 (837)-014-1113
12 12/24/80 10:40   9/22/03 20:47     02-227-661  042-153-83-79
14    1/9/86 8:54    12/3/11 0:41   017684 80873   0799-553-944
18  7/18/91 14:30    3/17/14 7:13     02-351-279  043-436-42-30
                                      picture.large nat id school
1    https://randomuser.me/api/portraits/men/48.jpg  AU  1     UT
2    https://randomuser.me/api/portraits/men/53.jpg  FR  2     UT
5  https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
8  https://randomuser.me/api/portraits/women/65.jpg  US  8     UT
9    https://randomuser.me/api/portraits/men/94.jpg  TR  9     UT
12   https://randomuser.me/api/portraits/men/80.jpg  FI 12     UT
14 https://randomuser.me/api/portraits/women/49.jpg  GB 14     UT
18 https://randomuser.me/api/portraits/women/68.jpg  FI 18     UT</code></pre>
</div>
</div>
<p>In this case, <strong><em>R</em></strong> evaluates the expression <code>df$school == "UT"</code> and returns a logical vector equal in length to the number of rows in <strong>df</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE
[13] FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>It then subsets the original <strong>df</strong> based on that vector, returning only rows that evaluate to “TRUE”.</p>
<p>The Boolean operators <code>&amp;</code> (for “AND”) and <code>|</code> (for “OR”) can be used to create more complex filtering criteria. Here, we filter the data frame for only those rows where the variable <strong>school</strong> is “UT” <em>AND</em> the variable <strong>gender</strong> is “female”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span> <span class="sc">&amp;</span> df<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"female"</span>, ]</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   gender name.title name.first name.last         location.street location.city
5  female         ms     susana    blanco 2208 avenida de america      mastoles
8  female       miss     kaylee    gordon         5475 camden ave         flint
14 female       miss   kimberly     brown         8654 manor road        bangor
18 female         ms       ella      neva          4620 visiokatu        kerava
   location.state location.postcode                      email
5     extremadura             29445  susana.blanco@example.com
8          oregon             84509  kaylee.gordon@example.com
14        borders          HI92 8RY kimberly.brown@example.com
18 finland proper             26385      ella.neva@example.com
      login.username login.password           dob date.registered
5     silverkoala701          aloha 12/18/55 3:21   10/3/02 17:55
8  beautifulgoose794       atlantis 3/24/48 12:22     5/5/13 8:14
14  crazyelephant996       nebraska   1/9/86 8:54    12/3/11 0:41
18  orangegorilla786       f00tball 7/18/91 14:30    3/17/14 7:13
            phone           cell
5     917-199-202    612-612-929
8  (817)-962-1275 (831)-325-1142
14   017684 80873   0799-553-944
18     02-351-279  043-436-42-30
                                      picture.large nat id school
5  https://randomuser.me/api/portraits/women/18.jpg  ES  5     UT
8  https://randomuser.me/api/portraits/women/65.jpg  US  8     UT
14 https://randomuser.me/api/portraits/women/49.jpg  GB 14     UT
18 https://randomuser.me/api/portraits/women/68.jpg  FI 18     UT</code></pre>
</div>
</div>
<p>Here, we filter the data frame for only rows where either the <strong>school</strong> is “UT” <em>OR</em> the variable <strong>gender</strong> is “female”, using the <code>|</code> operator. We also select only the columns <strong>gender</strong>, <strong>name.first</strong>, and <strong>name.last</strong> by passing a vector to the second argument of the <code>[ ]</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span> <span class="sc">|</span> df<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"female"</span>, <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"name.first"</span>, <span class="st">"name.last"</span>)]</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   gender name.first  name.last
1    male        ted     wright
2    male    quentin    schmitt
3  female      laura   johansen
5  female     susana     blanco
8  female     kaylee     gordon
9    male     baraek limoncuocu
12   male   valtteri   waisanen
13 female    vanessa     brewer
14 female   kimberly      brown
15 female     loreen   baettner
16 female      becky    wallace
18 female       ella       neva</code></pre>
</div>
</div>
</section>
<section id="selecting-columns-of-a-data-frame" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="selecting-columns-of-a-data-frame">Selecting Columns of a Data Frame</h3>
<p>We can also select to only return particular columns when we filter. Here, we return only the columns <strong>name.last</strong>, <strong>name.first</strong>, and <strong>school</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>school <span class="sc">==</span> <span class="st">"UT"</span>, <span class="fu">c</span>(<span class="st">"name.last"</span>, <span class="st">"name.first"</span>, <span class="st">"school"</span>)]</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    name.last name.first school
1      wright        ted     UT
2     schmitt    quentin     UT
5      blanco     susana     UT
8      gordon     kaylee     UT
9  limoncuocu     baraek     UT
12   waisanen   valtteri     UT
14      brown   kimberly     UT
18       neva       ella     UT</code></pre>
</div>
</div>
<p>Here, we return all rows from the data frame, but only the “name.last”, “name.first”, and “school” columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[ , <span class="fu">c</span>(<span class="st">"name.last"</span>, <span class="st">"name.first"</span>, <span class="st">"school"</span>)]</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    name.last name.first      school
1      wright        ted          UT
2     schmitt    quentin          UT
3    johansen      laura         A&amp;M
4     herrero     ismael         A&amp;M
5      blanco     susana          UT
6      wilson      mason        Rice
7     strauio       lutz  Texas Tech
8      gordon     kaylee          UT
9  limoncuocu     baraek          UT
10     perrin     basile Texas State
11      lopez      ruben         A&amp;M
12   waisanen   valtteri          UT
13     brewer    vanessa        Rice
14      brown   kimberly          UT
15   baettner     loreen         A&amp;M
16    wallace      becky  Texas Tech
17   gonzalez     hector         A&amp;M
18       neva       ella          UT
19    barnaby      simon Texas State
20      moser        max         A&amp;M</code></pre>
</div>
</div>
<p>We can also refer to columns by their positions and return them in a select order, thereby restructuring the data frame. Here, we return all rows from the data frame, but include only columns 1, 3, and 4, flipping the order of the latter two columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[ , <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)]</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   gender  name.last name.first
1    male     wright        ted
2    male    schmitt    quentin
3  female   johansen      laura
4    male    herrero     ismael
5  female     blanco     susana
6    male     wilson      mason
7    male    strauio       lutz
8  female     gordon     kaylee
9    male limoncuocu     baraek
10   male     perrin     basile
11   male      lopez      ruben
12   male   waisanen   valtteri
13 female     brewer    vanessa
14 female      brown   kimberly
15 female   baettner     loreen
16 female    wallace      becky
17   male   gonzalez     hector
18 female       neva       ella
19   male    barnaby      simon
20   male      moser        max</code></pre>
</div>
</div>
<p>We can use a minus sign <code>-</code> in front of a vector of indices to instead indicate columns we do not want to return:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> df[ , <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">18</span>)]</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>new_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   name.first  name.last      school
1         ted     wright          UT
2     quentin    schmitt          UT
3       laura   johansen         A&amp;M
4      ismael    herrero         A&amp;M
5      susana     blanco          UT
6       mason     wilson        Rice
7        lutz    strauio  Texas Tech
8      kaylee     gordon          UT
9      baraek limoncuocu          UT
10     basile     perrin Texas State
11      ruben      lopez         A&amp;M
12   valtteri   waisanen          UT
13    vanessa     brewer        Rice
14   kimberly      brown          UT
15     loreen   baettner         A&amp;M
16      becky    wallace  Texas Tech
17     hector   gonzalez         A&amp;M
18       ella       neva          UT
19      simon    barnaby Texas State
20        max      moser         A&amp;M</code></pre>
</div>
</div>
</section>
</section>
<section id="factors" class="level2" data-number="13.5">
<h2 data-number="13.5" class="anchored" data-anchor-id="factors"><span class="header-section-number">13.5</span> Factors</h2>
<p>We were introduced to the <em>factor</em> data class above. Again, factors are numeric codes that <strong><em>R</em></strong> can use internally that correspond to character value “levels”.</p>
<p>When we load in data from an external source (as we do in <a href="08-module.html#module-08"><strong>Module 08</strong></a>), {base} <strong><em>R</em></strong> tends to import character string data as factors, assigning to each unique string to an integer numeric code and assigning the string as a “label” for that code. Using factors can make some code run much more quickly (e.g., ANOVA, ANCOVA, and other forms of regression using categorical variables).</p>
</section>
<section id="variable-conversion-and-coercion" class="level2" data-number="13.6">
<h2 data-number="13.6" class="anchored" data-anchor-id="variable-conversion-and-coercion"><span class="header-section-number">13.6</span> Variable Conversion and Coercion</h2>
<p>You can convert <em>factor</em> to <em>character</em> data (and vice versa) using the <code>as.character()</code> or <code>as.factor()</code> commands. You can also convert/coerce any vector to a different class using similar constructs (e.g., <code>as.numeric()</code>), although not all such conversions are really meaningful. Converting <em>factor</em> data to <em>numeric</em> results in the the converted data having the value of <strong><em>R</em></strong>’s internal numeric code for the factor level, while converting <em>character</em> data to <em>numeric</em> results in the data being coerced into the special data value of <code>NA</code> (see below) for missing data.</p>
</section>
<section id="special-data-values" class="level2" data-number="13.7">
<h2 data-number="13.7" class="anchored" data-anchor-id="special-data-values"><span class="header-section-number">13.7</span> Special Data Values</h2>
<p>Finally, <strong><em>R</em></strong> has three special data values that it uses in a variety of situations.</p>
<ul>
<li><code>NA</code> (for <strong>not available</strong>) is used for missing data. Many statistical functions offer the possibility to include as an argument <code>na.rm=TRUE</code> (“remove NAs”) so that <code>NA</code>s are excluded from a calculation.</li>
<li><code>Inf</code> (and <code>-Inf</code>) is used when the result of a numerical calculation is too extreme for <strong><em>R</em></strong> to express</li>
<li><code>NaN</code> (for <strong>not a number</strong>) is used when <strong><em>R</em></strong> cannot express the results of a calculation , e.g., when you try to take the square root of a negative number</li>
</ul>
<section id="challenge-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="challenge-1">CHALLENGE:</h3>
<ul>
<li>Store the following vector of numbers as a 5 x 3 matrix: 3, 0, 1 ,23, 1, 2, 33, 1, 1, 42, 0, 1, 41, 0, 2</li>
<li>Be sure to fill the matrix <strong>ROWWISE</strong></li>
</ul>
<div class="fold s o">
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">matrix</span>(</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span> , <span class="dv">23</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">33</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">42</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">41</span>, <span class="dv">0</span>, <span class="dv">2</span>),</span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">nrow =</span> <span class="dv">5</span>,</span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol =</span> <span class="dv">3</span>,</span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">byrow =</span> <span class="cn">TRUE</span></span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    3    0    1
[2,]   23    1    2
[3,]   33    1    1
[4,]   42    0    1
[5,]   41    0    2</code></pre>
</div>
</div>
</div>
<ul>
<li>Then, coerce the matrix to a data frame</li>
</ul>
<div class="fold s o">
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>(d <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(m))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  V1 V2 V3
1  3  0  1
2 23  1  2
3 33  1  1
4 42  0  1
5 41  0  2</code></pre>
</div>
</div>
</div>
<ul>
<li>As a data frame, coerce the second column to be <em>logical</em> (i.e., Boolean)</li>
</ul>
<div class="fold s o">
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>(d[,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">as.logical</span>(d[,<span class="dv">2</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
</div>
<ul>
<li>As a data frame, coerce the third column to be a <em>factor</em></li>
</ul>
<div class="fold s o">
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>(d[,<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(d[,<span class="dv">3</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 1 1 2
Levels: 1 2</code></pre>
</div>
</div>
</div>
<ul>
<li>When you are done, use the <code>str()</code> command to show the data type for each variable in your dataframe.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   5 obs. of  3 variables:
 $ V1: num  3 23 33 42 41
 $ V2: logi  FALSE TRUE TRUE FALSE FALSE
 $ V3: Factor w/ 2 levels "1","2": 1 2 1 1 2</code></pre>
</div>
</div>
</section>
</section>
<section id="other-data-frame-like-structures" class="level2" data-number="13.8">
<h2 data-number="13.8" class="anchored" data-anchor-id="other-data-frame-like-structures"><span class="header-section-number">13.8</span> Other Data Frame-Like Structures</h2>
<section id="data-tables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="data-tables">Data Tables</h3>
<p>A “data table” is a structure introduced in the package {data.table} that provides an enhancements to the data frame structure, which is the standard data structure for storing tabular data in {base} <strong><em>R</em></strong>. We use the same syntax for creating a data table…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.table</span>(</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>),</span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>),</span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>)</span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a>dt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   firstName  community sex age
1:      Rick Alexandria   M  42
2:     Negan    Saviors   M  40
3:    Dwight    Saviors   M  33
4:    Maggie     Hiltop   F  28
5:  Michonne Alexandria   F  31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'data.table' and 'data.frame':  5 obs. of  4 variables:
 $ firstName: chr  "Rick" "Negan" "Dwight" "Maggie" ...
 $ community: chr  "Alexandria" "Saviors" "Saviors" "Hiltop" ...
 $ sex      : chr  "M" "M" "M" "F" ...
 $ age      : num  42 40 33 28 31
 - attr(*, ".internal.selfref")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># versus...</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>),</span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>),</span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>)</span>
<span id="cb170-9"><a href="#cb170-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb170-10"><a href="#cb170-10" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  firstName  community sex age
1      Rick Alexandria   M  42
2     Negan    Saviors   M  40
3    Dwight    Saviors   M  33
4    Maggie     Hiltop   F  28
5  Michonne Alexandria   F  31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   5 obs. of  4 variables:
 $ firstName: chr  "Rick" "Negan" "Dwight" "Maggie" ...
 $ community: chr  "Alexandria" "Saviors" "Saviors" "Hiltop" ...
 $ sex      : chr  "M" "M" "M" "F" ...
 $ age      : num  42 40 33 28 31</code></pre>
</div>
</div>
<p>Note that printing a data table results in a slightly different output than printing a data frame (e.g., row numbers are printed followed by a “:”) and the structure (<code>str()</code>) looks a bit different. Also, different from data frames, when we read in data, columns of <em>character</em> type are never converted to factors by default (i.e., we do not need to specify anything like <code>stringsAsFactors=FALSE</code> when we read in data… that’s the opposite default as we see for data frames).</p>
<p>The big advantage of using data tables over data frames is that they support a different, easier syntax for filtering rows and selecting columns and for grouping output.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>dt[sex<span class="sc">==</span><span class="st">"M"</span>] <span class="co"># filter for sex = "M" in a data table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   firstName  community sex age
1:      Rick Alexandria   M  42
2:     Negan    Saviors   M  40
3:    Dwight    Saviors   M  33</code></pre>
</div>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>sex<span class="sc">==</span><span class="st">"M"</span>, ] <span class="co"># filter for sex = "M" in a data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  firstName  community sex age
1      Rick Alexandria   M  42
2     Negan    Saviors   M  40
3    Dwight    Saviors   M  33</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>dt[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># return the first two rows of the data table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   firstName  community sex age
1:      Rick Alexandria   M  42
2:     Negan    Saviors   M  40</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ] <span class="co"># return the first two rows of the data table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  firstName  community sex age
1      Rick Alexandria   M  42
2     Negan    Saviors   M  40</code></pre>
</div>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>dt[ , sex] <span class="co"># returns the variable "sex"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "M" "M" "M" "F" "F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dt[ , sex]) <span class="co"># sex is a CHARACTER vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:5] "M" "M" "M" "F" "F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="fu">c</span>(<span class="st">"sex"</span>)] <span class="co"># returns the variable "sex"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "M" "M" "M" "F" "F"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df[, <span class="fu">c</span>(<span class="st">"sex"</span>)]) <span class="co"># sex is a FACTOR with 2 levels</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:5] "M" "M" "M" "F" "F"</code></pre>
</div>
</div>
<p>The data table structure also allows us more straightforward syntax - and implements much faster algorithms - for computations on columns and for perform aggregations of data by a grouping variable.</p>
</section>
<section id="tibbles" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="tibbles">“Tibbles”</h3>
<p>A “tibble” is another newer take on the data frame structure, implemented in the package {tibble} (which is loaded as part of {tidyverse}). The structure was created to keep the best features of data frames and correct some of the more frustrating aspects associated with the older structure. For example, like data tables, tibbles do not by default change the input type of a variable from <em>character</em> to <em>factor</em> when the tibble is created.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Rick"</span>, <span class="st">"Negan"</span>, <span class="st">"Dwight"</span>, <span class="st">"Maggie"</span>, <span class="st">"Michonne"</span>),</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">community =</span> <span class="fu">c</span>(<span class="st">"Alexandria"</span>, <span class="st">"Saviors"</span>, <span class="st">"Saviors"</span>, <span class="st">"Hiltop"</span>, <span class="st">"Alexandria"</span>),</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"F"</span>),</span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">40</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">31</span>)</span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  firstName community  sex     age
  &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt;
1 Rick      Alexandria M        42
2 Negan     Saviors    M        40
3 Dwight    Saviors    M        33
4 Maggie    Hiltop     F        28
5 Michonne  Alexandria F        31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [5 × 4] (S3: tbl_df/tbl/data.frame)
 $ firstName: chr [1:5] "Rick" "Negan" "Dwight" "Maggie" ...
 $ community: chr [1:5] "Alexandria" "Saviors" "Saviors" "Hiltop" ...
 $ sex      : chr [1:5] "M" "M" "M" "F" ...
 $ age      : num [1:5] 42 40 33 28 31</code></pre>
</div>
</div>
<p>Note that the output of printing a tibble again looks slightly different than that for data frames or data tables… e.g., the data type of each column is included in the header row, for example. <code>str()</code> also shows us that characters were not converted to factors.</p>
<p>Additionally, subsetting tibbles with the single bracket operator (<code>[ ]</code>) always returns a tibble, whereas doing the same with a data frame can return either a data frame or a vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>t[, <span class="st">"age"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
    age
  &lt;dbl&gt;
1    42
2    40
3    33
4    28
5    31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(t[, <span class="st">"age"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="st">"age"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 42 40 33 28 31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df[, <span class="st">"age"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>There are some other subtle differences regarding the behavior of tibbles versus data frames that are also worthwhile to note. Data frames support “partial matching” in variable names when the <code>$</code> operator is used, thus <code>df$a</code> will return the variable <code>df$age</code>. Tibbles are stricter and will never do partial matching.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>a <span class="co"># returns df$age</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 42 40 33 28 31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>t<span class="sc">$</span>a <span class="co"># returns NULL and gives a warning</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `a`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<p>Finally, tibbles are careful about recycling. When creating a tibble, columns have to have consistent lengths and only values of length 1 are recycled. Thus, in the following…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">c=</span><span class="dv">1</span>)</span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this works fine... c is recycled</span></span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>t</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
      a     c
  &lt;int&gt; &lt;dbl&gt;
1     1     1
2     2     1
3     3     1
4     4     1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># t &lt;- tibble(a=1:4, c=1:2)</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="co"># but this would throw an error... c is not recycled even</span></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="co"># though it could fit evenly into the number of rows</span></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">c=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb209-6"><a href="#cb209-6" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  a c
1 1 1
2 2 2
3 3 1
4 4 2</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="concept-review" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="concept-review">Concept Review</h2>
<ul>
<li>Creating matrices and arrays: <code>matrix(data=, nrow=, ncol=, byrow=)</code>, <code>array(data=, dim=)</code>, <code>rbind()</code>, <code>cbind()</code></li>
<li>Creating lists: <code>list()</code></li>
<li>Creating data frames: <code>data.frame()</code></li>
<li>Subsetting: single bracket (<code>[ ]</code>), double bracket (<code>[[ ]]</code>), and <code>$</code> notation</li>
<li>Variable coercion: <code>as.numeric()</code>, <code>as.character()</code>, <code>as.data.frame()</code></li>
<li>Reading .csv data: <code>read.csv(file=, header=, stringsAsFactors=)</code></li>
<li>Filtering rows of a data frame using {base} <strong><em>R</em></strong>: <code>df[df$&lt;variable name&gt; == "&lt;criterion&gt;", ]</code>, <code>df[df[["&lt;variable name&gt;"]] == "&lt;criterion&gt;", ]</code></li>
<li>Selecting/excluding columns of a data frame: <code>df[ , c("&lt;variable name 1&gt;", "&lt;variable name 2&gt;",...)]</code>,<code>df[ , c(&lt;column index 1&gt;, &lt;column index 2&gt;,...)]</code></li>
</ul>
<script src="src/hide_output.js"></script>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./06-module.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Module 06</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./08-module.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Module 08</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>